var flowersScene,flowersCamera,flowersLight,skybox;const LOWER_RADIUS_VAL=150,UPPER_RADIUS_VAL=2e3;let hl,sceneSkybox,isShowFlowerScene=!1,focusSpeechSpecs=[{x:551,y:1656,z:-46},2.6827,1.5365,1,1],initCameraSpecs=[{x:-1187,y:214,z:626},2.6563,1.4124,1360,150];function createScene(){engine.enableOfflineSupport=!0,BABYLON.Database.IDBStorageEnabled=!0,(flowersScene=new BABYLON.Scene(engine)).enableSceneOffline=!0,flowersScene.ambientColor=new BABYLON.Color3(.3,.3,.3),flowersCamera=create_flowers_camera(),create_flowers_light(),sceneSkybox=create_flowers_skybox(),load_meshes(),load_orig_flowers(),add_mouse_listener(),hl=new BABYLON.HighlightLayer("hl1",flowersScene);var e=new BABYLON.CubeTexture.CreateFromPrefilteredData("front/textures/environment.dds",flowersScene);return e.gammaSpace=!1,e.level=.5,flowersScene.environmentTexture=e,isShowFlowerScene=!0,flowersScene}function create_flowers_camera(){var e=new BABYLON.ArcRotateCamera("Initial Camera",BABYLON.Tools.ToRadians(0),BABYLON.Tools.ToRadians(0),30,new BABYLON.Vector3(-1191,185,628),flowersScene);return e.fovMode=BABYLON.Camera.FOVMODE_HORIZONTAL_FIXED,e.fov=1.4,e.checkCollisions=!0,e.upperRadiusLimit=UPPER_RADIUS_VAL,e.lowerRadiusLimit=LOWER_RADIUS_VAL,e.wheelPrecision=1,e.pinchPrecision=1,e.angularSensibilityX=4e3,e.angularSensibilityY=4e3,e.panningSensibility=10,e.upperBetaLimit=10,e.attachControl(canvas,!0),flowersScene.activeCamera=e,e.maxZ=21e3,e}var planetsLight;function create_flowers_light(){(flowersLight=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(0,-50,1e3),flowersScene)).radius=1e3,flowersLight.specular=new BABYLON.Color3(0,0,0),flowersLight.diffuse=new BABYLON.Color3(1,1,1),flowersLight.groundColor=new BABYLON.Color3(1,1,1),flowersLight.intensity=1.3}function create_flowers_skybox(){var e=BABYLON.MeshBuilder.CreateBox("skybox",{size:2e4},flowersScene);e.position.y=-500,e.position.z=1e3,e.rotation.y=BABYLON.Tools.ToRadians(-60),e.isPickable=!1,e.checkCollisions=!0;var i=new BABYLON.StandardMaterial("skyboxMaterial",flowersScene);i.backFaceCulling=!1;return e.infiniteDistance=!0,i.reflectionTexture=new BABYLON.CubeTexture.CreateFromImages(["front/finalSkybox/px.png","front/finalSkybox/py.png","front/finalSkybox/pz.png","front/finalSkybox/nx.png","front/finalSkybox/ny.png","front/finalSkybox/nz.png"],flowersScene),i.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,i.disableLighting=!0,i.specular=new BABYLON.Vector3(0,0,0),e.material=i,i.freeze(),e.freezeWorldMatrix(),e}let mbaye_object,earth_object,temp,origScaling,origColor,nuvolaOrigScaling,flowerLbl,earth_submeshes=new Map;function load_meshes(){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/mbaye/","MbayePipes.glb",flowersScene,function(e){var i=0;if(e.lengthComputable)i=(100*e.loaded/e.total).toFixed();else{var o=e.loaded/1048576;i=Math.floor(100*o)/100}i<100&&(document.getElementById("loadingScreenPercent").innerHTML="Loading: "+i+" %")}).then(function(e){e.meshes[0].position=new BABYLON.Vector3(-24.95,172.79,9.3),e.meshes[0].rotationQuaternion=new BABYLON.Quaternion(-.025,.9991,.0119,-.01717),e.meshes[0].scaling=new BABYLON.Vector3(6.5,6.5,-6.5),mbaye_object=e.meshes[0],e.meshes.forEach(function(e){if(e.isPickable=!0,"MbayeBody"===e.name){let i=new BABYLON.PBRMaterial("pbr",flowersScene);e.material=i,e.material.backFaceCulling=!1,i.albedoColor=new BABYLON.Color3(.5,.5,.5),i.emissiveColor=new BABYLON.Color3(0,0,0),i.metallic=1,i.metallicF0Factor=.5,i.roughness=.15,i.microSurface=1}else"R_EYEAventurine_primitive1"!==e.name&&"L_EYEAventurine_primitive1"!==e.name||(e.material.albedoColor=new BABYLON.Color3(.01,.2,.07))})})]).then(()=>{flowersCamera.target=new BABYLON.Vector3(0,0,0),flowersCamera.radius=1360,create_mesh("Nuvola","front/images3D/flowersScene/nuvola.png",600,380,.85,{x:1354,y:1676,z:-972},{x:-.0114,y:-.9311,z:.0196,w:-.3637},flowersScene),init_scrollable_viewer("SolarNuvolaSpeech","front/images3D/flowersScene/solarNuvolaSpeech.png",2e3,1e3,{x:1740,y:1608,z:-675},{x:.011,y:.8506,z:-.0146,w:.525},flowersScene),add_action_mgr(create_mesh("Solar","front/images3D/homeScene/solarSitting2.png",550,454,.8,{x:1830,y:1479,z:-130},{x:.0335,y:-.7914,z:-.0356,w:-.6093},flowersScene)),setup_music_player()})}function add_action_mgr(e){e.actionManager=new BABYLON.ActionManager(flowersScene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverFlower)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutFlower))}var onOverFlower=e=>{(flowerLbl=document.createElement("span")).setAttribute("id","flowerLbl");var i=flowerLbl.style;i.position="absolute",i.color="#00BFFF",i.fontFamily="Courgette-Regular",i.fontSize="2rem",i.textShadow="1px 1px 3px black",i.top=flowersScene.pointerY-50+"px",i.left=flowersScene.pointerX+10+"px",i.cursor="pointer",i.pointerEvents="none";let o=e.meshUnderPointer.name;earth_submeshes.has(e.source.name)?(document.body.appendChild(flowerLbl),flowerLbl.textContent="Click for Culture."):"Solar"!==e.source.name&&"Nuvola"!==e.source.name||(e.source.material.emissiveColor=BABYLON.Color3.White(),nuvolaOrigScaling=e.source.scaling,e.source.scaling=new BABYLON.Vector3(1.1*nuvolaOrigScaling.x,1.1*nuvolaOrigScaling.y,1.1*nuvolaOrigScaling.z),document.body.appendChild(flowerLbl),flowerLbl.textContent=isSpeechViewActive?"Return":"View"),floatingFlowersMap.has(o)&&(origScaling=e.source.scaling,e.source.scaling=new BABYLON.Vector3(1.6*origScaling.x,1.6*origScaling.y,1.6*origScaling.z),e.source.material.emissiveColor=BABYLON.Color3.Random(),document.body.appendChild(flowerLbl),flowerLbl.textContent=flowerName.get(o))},onOutFlower=e=>{for(earth_submeshes.has(e.source.name)||("Solar"===e.source.name||"Nuvola"===e.source.name?(e.source.material.emissiveColor=new BABYLON.Color3(.4,.4,.4),e.source.scaling=nuvolaOrigScaling):(e.source.scaling=origScaling,e.source.material.emissiveColor=new BABYLON.Color3(1,1,1)));document.getElementById("flowerLbl");)document.getElementById("flowerLbl").parentNode.removeChild(document.getElementById("flowerLbl"))};function create_mesh(e,i,o,t,n,r,l,a){var s=BABYLON.MeshBuilder.CreatePlane(e,{height:o,width:t},a);s.scaling=new BABYLON.Vector3(n,n,n),s.position=new BABYLON.Vector3(r.x,r.y,r.z),s.rotationQuaternion=new BABYLON.Quaternion(l.x,l.y,l.z,l.w);var c=new BABYLON.StandardMaterial(e+"matl",a);return c.diffuseTexture=new BABYLON.Texture(i,a),c.opacityTexture=new BABYLON.Texture(i,a),"Nuvola"==e&&(c.emissiveColor=new BABYLON.Color3(.4,.4,.4)),c.ambientColor=new BABYLON.Color3(1,1,1),c.diffuseTexture.hasAlpha=!0,s.material=c,s}let isSpeechViewActive=!1;function init_scrollable_viewer(e,i,o,t,n,r){let l=BABYLON.MeshBuilder.CreatePlane(e,{width:o,height:t},flowersScene);l.position=new BABYLON.Vector3(n.x,n.y,n.z),l.rotationQuaternion=new BABYLON.Quaternion(r.x,r.y,r.z,r.w);let a=new BABYLON.StandardMaterial(e+"Matl",flowersScene);a.diffuseColor=new BABYLON.Color3(1,0,0),a.backFaceCulling=!1,l.material=a;var s=BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(l),c=new BABYLON.GUI.ScrollViewer;c.thickness=0,c.width=1,c.height=1,c.barColor="green",c.thumbLength=.3,c.thumbHeight=.1,c.verticalBar.border=0,c.barSize=40,(isSmallDevice()||isMobile())&&(c.barSize=60),c.onPointerDownObservable.add(function(){isSpeechViewActive&&flowersCamera.detachControl(canvas)}),c.onPointerUpObservable.add(function(){isSpeechViewActive&&flowersCamera.attachControl(canvas,!0)}),s.addControl(c);var d=new BABYLON.GUI.Rectangle;d.thickness=0,d.width=1,d.height=7,d.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,d.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,c.addControl(d);var w=new BABYLON.GUI.Image(e+"Img",i);return w.width=1,w.height=1,d.addControl(w),l}function set_scale(){return getRandomInt(40,50)}let nb=100;var TWO_PI=2*Math.PI,angle=TWO_PI/nb;let floatingFlowersMap=new Map;function load_orig_flowers(){for(const[e,i]of flowersMbayeMap.entries()){let o;null!==i[0]&&(o=i[0]);let t=init_flower(e,e+"Matl","front/images3D/flowers2D/orig/"+e+".png",set_scale(),o.x,o.y,o.z);floatingFlowersMap.set(e,t)}}let currFlower,tempFlowersMap=new Map;function init_flower(e,i,o,t,n,r,l){let a=BABYLON.Mesh.CreatePlane(e,t,flowersScene);a.isVisible=!0,a.position=new BABYLON.Vector3(n,r,l),a.rotation.y=BABYLON.Tools.ToRadians(-250);let s=new BABYLON.StandardMaterial(i,flowersScene);s.diffuseColor=BABYLON.Color3.Black(),s.diffuseTexture=new BABYLON.Texture(o,flowersScene),s.diffuseTexture.hasAlpha=!0,s.specularColor=new BABYLON.Color3(0,0,0),s.emissiveColor=BABYLON.Color3.White(),s.backFaceCulling=!1,a.material=s,add_action_mgr(a),flowerObjMap.set(e,a);let c=e.toLowerCase();return c=c.replace(/\s/g,""),tempFlowersMap.set(c,a),a}function getRandomInt(e,i){return Math.floor(Math.random()*(i-e+1)+e)}function enable_gizmo(e){designUtilLayer=new BABYLON.UtilityLayerRenderer(flowersScene),designUtilLayer.utilityLayerScene.autoClearDepthAndStencil=!1,homeGizmo=new BABYLON.RotationGizmo(designUtilLayer),homeGizmo.attachedMesh=e,homeGizmo2=new BABYLON.PositionGizmo(designUtilLayer),homeGizmo2.attachedMesh=e,homeGizmo2.scaleRatio=1.5}function get_has_flower_name(e){return!!flowersMbayeMap.get(e)}function set_scene_active_meshes(e,i){e.meshes.forEach(function(e){e.setEnabled(i),"cloud"!==e.name&&"speech1"!==e.name&&"speech2"!==e.cloud||e.setEnabled(!1)})}let isFlowerClicked2,isPointerDown=!1;function add_mouse_listener(){var e=function(e){if(flowersScene){var i=flowersScene.pick(flowersScene.pointerX,flowersScene.pointerY);if(i.hit){var o=i.pickedMesh.name;if(flowersMbayeMap.has(o)&&"flowersScene"==currScene){let e=get_has_flower_name(o),i=checkScreenAndDoubleClick();if(e&&i){let e=flowersMbayeMap.get(o),i=e[3].id,t=e[3].start;set_carpet_countries(o),setTimeout(function(){reset_selected_flower_camera(),flowersCamera.detachControl(canvas),set_3D_flower(o),open_book_of_flowers(o),load_flower_music(i,t),showSelectedFlowerScene=!0,set_scene_active_meshes(flowersScene,!1),set_scene_active_meshes(selectedFlowerScene,!0),set_wiki_values(e[2],i),$("#wikipediaIcon").show(),set_instructions_overlay(1),hl.removeAllMeshes(),isVideoEnabled=!0,$("#musicVideoDiv").css("display","flex")},1e3)}}if("Solar"===o){let e=focusSpeechSpecs[0];isSpeechViewActive?(flowersCamera.setTarget(new BABYLON.Vector3(0,0,0)),flowersCamera.alpha=initCameraSpecs[1],flowersCamera.beta=initCameraSpecs[2],flowersCamera.radius=initCameraSpecs[3],flowersCamera.lowerRadiusLimit=initCameraSpecs[4],isSpeechViewActive=!1):(flowersCamera.setTarget(new BABYLON.Vector3(e.x,e.y,e.z)),flowersCamera.alpha=focusSpeechSpecs[1],flowersCamera.beta=focusSpeechSpecs[2],flowersCamera.radius=focusSpeechSpecs[3],flowersCamera.lowerRadiusLimit=focusSpeechSpecs[4],isSpeechViewActive=!0)}(earth_submeshes.has(o)||"earth"===o)&&randomize_flower()}else isPointerDown||(isPointerDown=!0)}},i=function(){isPointerDown=!1},o=function(e){};canvas.addEventListener("pointerdown",e,!1),canvas.addEventListener("pointerup",i,!1),canvas.addEventListener("pointermove",o,!1),flowersScene.onDispose=function(){canvas.removeEventListener("pointerdown",e),canvas.removeEventListener("pointerup",i),canvas.removeEventListener("pointermove",o)}}function checkScreenAndDoubleClick(){return!isMobile()||(isFlowerClicked2?(isFlowerClicked2=!1,!0):(isFlowerClicked2=!0,void setTimeout(function(){if(isFlowerClicked2)return isFlowerClicked2=!1,Swal.fire({width:"10vw",padding:"3em",title:"Double Tap to view flower info.",showConfirmButton:!1,position:"top-end",showClass:{backdrop:"swal2-backdrop-hide"},timer:2e3,width:100,customClass:{popup:"trevor-popup-class"}}),!1},500)))}let randomFlower,flowerObjMap=new Map;function randomize_flower(){let e=0,i=Math.floor(Math.random()*Math.floor(205));for(const[o,t]of flowersMbayeMap.entries()){if(i===e){load_flower_music(t[3].id,t[3].start),tempOrigScaling&&(randomFlower.scaling=tempOrigScaling,randomFlower.material.emissiveColor=new BABYLON.Color3(1,1,1)),(randomFlower=flowerObjMap.get(o)).material.emissiveColor=BABYLON.Color3.Green(),tempOrigScaling=randomFlower.scaling,randomFlower.scaling=new BABYLON.Vector3(2*tempOrigScaling.x,2*tempOrigScaling.y,2*tempOrigScaling.z),isVideoEnabled||(isVideoEnabled=!0,$("#musicVideoDiv").css("display","flex"))}e++}}function create_lowres_earth(){earth_object=init_planet("earth","earthMatl","front/textures/home/planets/earth.jpg","front/textures/home/planets/earthnormal.png",0,0,0,270),animateObjectRotationNoEase(earth_object,10,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0))}var animateObjectRotationNoEase=function(e,i,o,t){BABYLON.Animation.CreateAndStartAnimation("objRot"+e.name,e,"rotation",i,o,e.rotation,t,1,null)};function load_highres_earth(){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/earth/","earth122319.babylon",flowersScene).then(function(e){e.meshes[9].scaling=new BABYLON.Vector3(.45,.45,.45),e.meshes[9].rotationQuaternion=new BABYLON.Quaternion(0,-.7648,0,.6442),e.meshes.forEach(function(e){e.checkCollisions=!0,e.isPickable=!0,earth_submeshes.set(e.name,null),add_action_mgr(e),"Sea"===e.name&&(water=new BABYLON.WaterMaterial("water",flowersScene,new BABYLON.Vector2(2048,2048)),water.backFaceCulling=!0,water.bumpTexture=new BABYLON.Texture("front/textures/participate/waterbump.png",flowersScene),water.windForce=10,water.windDirection=new BABYLON.Vector2(-1,0),water.waveHeight=.2,water.bumpHeight=.3,water.waveLength=.1,water.colorBlendFactor=.25714,water.waterColor=new BABYLON.Color3(.31428,.2,.80357),water.addToRenderList(sceneSkybox),e.material=water)}),earth_object=e.meshes[9]})]).then(()=>{animateObjectRotationNoEase(earth_object,10,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0))})}function init_planet(e,i,o,t,n,r,l,a){var s=BABYLON.Mesh.CreateSphere(e,0,a,flowersScene);s.position=new BABYLON.Vector3(n,r,l);var c=new BABYLON.StandardMaterial(i,flowersScene);return c.diffuseTexture=new BABYLON.Texture(o,flowersScene),c.bumpTexture=new BABYLON.Texture(t,flowersScene),c.specularColor=new BABYLON.Color3(0,0,0),c.freeze(),s.freezeWorldMatrix(),s.material=c,s.material.freeze(),s.convertToUnIndexedMesh(),s}var engine=new BABYLON.Engine(canvas,!0,{preserveDrawingBuffer:!0,stencil:!0},!0),theScene=createScene(),selectedFlowerScene=createSelectedFlowerScene(),i=0;let showSelectedFlowerScene=!1,isFlowerClicked=!1,currScene="flowersScene";theScene.executeWhenReady(function(){document.getElementById("loadingScreenPercent").style.visibility="hidden",document.getElementById("loadingScreenPercent").innerHTML="Loading: 0 %",document.getElementById("loadingScreenDiv").remove(),mbaye_object.setParent(earth_object),(isMobile()||isSmallDevice())&&set_touch_icons(),engine.runRenderLoop(function(){theScene&&selectedFlowerScene&&(isShowFlowerScene&&theScene.render(),showSelectedFlowerScene&&selectedFlowerScene.render(),showSelectedFlowerScene&&!isFlowerClicked&&(flowersCamera.detachControl(canvas),selectedFlowerCamera.attachControl(canvas,!0),currScene="selectedFlowerScene",isFlowerClicked=!0,isShowFlowerScene=!1))})}),window.addEventListener("orientationchange",function(e){testOrientation()},!1),window.addEventListener("resize",function(e){engine.resize(),testOrientation(),testFullscreen()},!1),$("#wikiPage").on("load",function(){$(".iframe-loading").hide()}),$("#carpetsWikiPage").on("load",function(){$(".iframe-loading").hide()});let isScreenVisible=!1,isCharDivFullscreen=!1,isCharDivFullscreen2=!1;function showPage(e,i){$(".iframe-loading").show(),document.getElementById("wikiPage").src=e,document.getElementById("page-url").href=e+"",document.getElementById("page-url-span").textContent=e+"",document.getElementById("song-url").href="https://www.youtube.com/watch?v="+i,document.getElementById("song-url-span").textContent="https://www.youtube.com/watch?v="+i}function showPage2(e){$(".iframe-loading").show();document.getElementById("iframe-loading");let i=document.getElementById("carpetsWikipediaDiv");document.getElementById("carpetsWikiPage").src=e,document.getElementById("carpet-page-url").href=e+"",document.getElementById("carpet-page-url-span").textContent=e+"","visible"!=i.style.visibility&&(i.style.visibility="visible",isScreenVisible=!0)}function hidePage(e){1===e?(document.getElementById("flowersWikipediaDiv").style.visibility="hidden",document.getElementById("wikiPage").src=""):2===e?(document.getElementById("carpetsWikipediaDiv").style.visibility="hidden",document.getElementById("carpetsWikiPage").src=""):(document.getElementById("flowersWikipediaDiv").style.visibility="hidden",document.getElementById("wikiPage").src="",document.getElementById("carpetsWikipediaDiv").style.visibility="hidden",document.getElementById("carpetsWikiPage").src=""),document.getElementById("iframe-loading").style.visibility="hidden",isScreenVisible=!1,document.getElementById("flowerModelDiv").style.visibility="hidden"}$("#carpetsWikipediaDiv #close-btn").on("click",function(e){$("#carpetsWikipediaDiv").css("visibility","hidden")}),$("#flowersWikiDivHeader #close-btn").on("click",function(e){$("#flowersWikipediaDiv").css("visibility","hidden")}),$("#flowerModelDiv #close-btn").on("click",function(e){$(".modelArrow").css("display","none"),isFlowerFullscreen?($("#flowerModelDivHeader #minimize-btn").trigger("click"),document.getElementById("flowerModelDiv").style.visibility="hidden"):document.getElementById("flowerModelDiv").style.visibility="hidden"});let yt_player,isFlowerFullscreen=!1;function set_flower_window_mode(){}$("#flowerModelDivHeader #fullscreen-btn, #flowerModelDivHeader #minimize-btn").on("click",function(e){isFlowerFullscreen?(resize_window("window","3dflower"),$("#flowerModelDivHeader").css("height","25%"),$("#flowerModelDivHeader #fullscreen-btn").show(),$("#flowerModelDivHeader #minimize-btn").hide(),$(".modelFullscreenLabel").html("Fullscreen"),set_instructions_overlay(3)):(resize_window("full","3dflower"),isSmallDevice()||isMobile()?$("#flowerModelDivHeader").css("height","10%"):$("#flowerModelDivHeader").css("height","6%"),$("#flowerModelDivHeader #fullscreen-btn").hide(),$("#flowerModelDivHeader #minimize-btn").show(),$(".modelFullscreenLabel").html("Minimize"),set_instructions_overlay(2)),isFlowerFullscreen=!isFlowerFullscreen}),document.onkeydown=(e=>{"o"!=e.key&&"O"!=e.key||(currFlower=null,homeGizmo.attachedMesh=null,homeGizmo2.attachedMesh=null)});let isMusicChanged=!1,theClick=0;function setup_music_player(){$(".musicPlayer").empty();var e=document.getElementById("player");window.YT.ready(function(){yt_player=new YT.Player(e,{host:"https://www.youtube.com",height:"0",width:"0",videoId:"",playerVars:{autoplay:0,loop:0,start:0,enablejsapi:1,origin:window.location.href,widget_referrer:window.location.href},events:{onReady:onPlayerReady}})})}function onPlayerReady(e){e.target.playVideo()}function load_flower_music(e,i){$(".musicPlayer").empty(),yt_player.loadVideoById(e,i),yt_player.playVideo()}function stop_flower_music(){yt_player.stopVideo()}$("#musicVideoDivHeader #close-btn").on("click",function(e){$("#musicVideoDiv").hide(),isVideoEnabled=!1});let tempOrigScaling,isMusicFullscreen=!1;function resize_window(e,i){let o;"youtube"===i?o=$("#musicVideoDiv #player"):"3dflower"===i&&(o=$("#flowerModelDiv")),"full"===e?(o.css({width:"100vw",height:"95vh"}),"youtube"===i?$("#musicVideoDiv").css({width:"100vw",height:"auto"}):"3dflower"===i&&o.css({left:"0",height:"100%"}),$("#minimize-btn").css("padding-right","1%"),$("#flowerModelDiv #minimize-btn").css("padding-right","1%")):isMobile()||isSmallDevice()?(o.css({width:"30vw",height:"18vw"}),"youtube"===i?$("#musicVideoDiv").css("width","30vw"):"3dflower"===i&&o.css("left","4%")):(o.css({width:"20vw",height:"12vw"}),"youtube"===i?$("#musicVideoDiv").css("width","20vw"):"3dflower"===i&&o.css("left","4%"))}function showFlowerModelDiv(e){document.getElementById("flowerViewer").src="front/objects/flowersMbayeScene/flowers3D/"+e+".glb",document.getElementById("flowerModelDiv").style.visibility="visible",$("#flowerModelDiv").show()}function set_wiki_values(e,i){showPage(e,i)}$("#musicVideoDivHeader #fullscreen-btn, #musicVideoDivHeader #minimize-btn").on("click",function(e){isMusicFullscreen?(resize_window("window","youtube"),$("#musicVideoDivHeader #fullscreen-btn").show(),$("#musicVideoDivHeader #minimize-btn").hide(),$(".wikiFullscreenLabel").html("Fullscreen")):(resize_window("full","youtube"),$("#musicVideoDivHeader #fullscreen-btn").hide(),$("#musicVideoDivHeader #minimize-btn").show(),$(".wikiFullscreenLabel").html("Minimize")),isMusicFullscreen=!isMusicFullscreen}),$("#searchFlowerBtn").on("click",function(){let e=$("#searchFlowerField").val();e=(e=e.toLowerCase()).replace(/\s/g,"");for(const[i,o]of tempFlowersMap.entries())i.includes(e)&&(hl.addMesh(o,new BABYLON.Color3.Green),tempOrigScaling=o.scaling,o.scaling=new BABYLON.Vector3(1.5*tempOrigScaling.x,1.5*tempOrigScaling.y,1.5*tempOrigScaling.z),setTimeout(function(){hl.removeMesh(o),o.scaling=tempOrigScaling},3e3))}),$("#wikipediaIcon").on("click",function(){let e=document.getElementById("iframe-loading");document.getElementById("flowersWikipediaDiv");"visible"!=e.style.visibility&&(e.style.visibility="visible"),$("#flowersWikipediaDiv").css("visibility","visible")});let modelCount=0;$("#flowerModelDiv #rightArrow").on("click",function(e){let i=flowers3DMap.get(chosenFlower.name),o=i.length;showFlowerModelDiv(modelCount<o-1?i[++modelCount]:i[modelCount=0])}),$("#flowerModelDiv #leftArrow").on("click",function(e){modelCount--;let i=flowers3DMap.get(chosenFlower.name),o=i.length;showFlowerModelDiv(modelCount<0?i[modelCount=o-1]:i[modelCount])}),$(document).ready(function(){testOrientation(),isSmallDevice()||isMobile()?create_lowres_earth():load_highres_earth()});let circleType,circleType1,circleType2,circleType3,circleType4,isIns2Active=!1;function set_circle_type(){try{isIns2Active?(circleType=new CircleType(document.getElementById("textCurve1")),circleType3=new CircleType(document.getElementById("textCurve2")),circleType1=new CircleType(document.getElementById("textCurveanticlock")),circleType2=new CircleType(document.getElementById("textCurveanticlock2")),(circleType4=new CircleType(document.getElementById("textCurveGlobe"))).radius(100),circleType.radius(150),circleType3.radius(150),circleType1.radius(200).dir(-1),circleType2.radius(200).dir(-1),$("#textCurveGlobe").css("transform","rotate(75deg)")):(circleType4.destroy(),circleType.destroy(),circleType3.destroy(),circleType1.destroy(),circleType2.destroy(),$("#textCurveGlobe").css("transform",""))}catch(e){}}function show_overlay_text(e){1==e?($("#infoIconTextflowers").toggle(),$("#infoIconTextdownflower").toggle(),$("#arrowGIF2").toggle(),$("#textCurveGlobe").toggle(),isIns2Active=!isIns2Active,set_circle_type()):2==e?(isIns2Active=!isIns2Active,$("#flowerInstruction").toggle(),$("#infoIconTextUpRight").toggle(),$("#instrFlowerLeftUp").toggle(),$("#instrFlowerMusic").toggle(),$("#instrFlowerDesign").toggle(),$("#textCurve1").toggle(),$("#textCurve2").toggle(),$("#textCurveanticlock").toggle(),$("#textCurveanticlock2").toggle(),set_circle_type()):3==e&&($("#instrFlowerFullScreen").toggle(),$("#instrFlowerMinimize").toggle(),$("#flowerInstruction").toggle())}function set_instructions_overlay(e){1==e?($("#infoIconTextflowers").hide(),$("#infoIconTextdownflower").hide(),$("#textCurveGlobe").hide(),$("#arrowGIF2").hide(),isIns2Active=!1,set_circle_type()):2==e?($("#flowerInstruction").hide(),$("#infoIconTextUpRight").hide(),$("#instrFlowerLeftUp").hide(),$("#instrFlowerMusic").hide(),$("#instrFlowerDesign").hide(),$("#textCurve1").hide(),$("#textCurve2").hide(),$("#textCurveanticlock").hide(),$("#textCurveanticlock2").hide(),isIns2Active=!1,set_circle_type()):3==e&&($("#instrFlowerFullScreen").hide(),$("#instrFlowerMinimize").hide(),$("#flowerInstruction").hide())}$("#infoIcon").on("click",function(){show_overlay_text(isShowFlowerScene?1:isFlowerFullscreen?3:2)});