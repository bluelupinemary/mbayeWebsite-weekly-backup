function create_camera(e){var t=new BABYLON.ArcRotateCamera("Earth Camera",BABYLON.Tools.ToRadians(0),BABYLON.Tools.ToRadians(0),30,new BABYLON.Vector3(-1135,486,1e3),e);return t.fovMode=BABYLON.Camera.FOVMODE_HORIZONTAL_FIXED,t.fov=1.4,t.upperRadiusLimit=UPPER_RADIUS_VAL,t.attachControl(canvas,!0),t.wheelPrecision=3,t.angularSensibilityX=4e3,t.angularSensibilityY=4e3,t.panningSensibility=10,t.upperBetaLimit=10,t.panningDistanceLimit=1500,t.pinchPrecision=1,e.activeCamera=t,t.maxZ=28e3,t.viewport=new BABYLON.Viewport(0,0,1,1),t}function create_light(e){var t=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(1,3,100),e);return t.radius=500,t.specular=new BABYLON.Color3(0,0,0),t.diffuse=new BABYLON.Color3(1,1,1),t.groundColor=new BABYLON.Color3(.5,.5,.5),t.intensity=3,t}function create_skybox(e){var t=BABYLON.MeshBuilder.CreateBox("earthSkybox",{size:25e3},e);t.position.y=100,t.position.z=1e3,t.rotation.y=BABYLON.Tools.ToRadians(-60),t.isPickable=!1,t.checkCollisions=!0;var n=new BABYLON.StandardMaterial("earthSkyboxMaterial",e);n.backFaceCulling=!1;return n.reflectionTexture=new BABYLON.CubeTexture.CreateFromImages(["front/finalSkybox/px.png","front/finalSkybox/py.png","front/finalSkybox/pz.png","front/finalSkybox/nx.png","front/finalSkybox/ny.png","front/finalSkybox/nz.png"],e),n.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,n.disableLighting=!0,n.specular=new BABYLON.Vector3(0,0,0),t.material=n,n.freeze(),t.freezeWorldMatrix(),t}let solarOrbit,initVideo,initWebCamScreen,initWebCamScreen22;function create_solar_orbit(e){(solarOrbit=BABYLON.Mesh.CreateGround("orbit",3e3,2600,1,e)).isPickable=!1,solarOrbit.scaling=new BABYLON.Vector3(2.5,2.5,2.5),solarOrbit.position=new BABYLON.Vector3(200,0,-100),solarOrbit.rotation=new BABYLON.Vector3(BABYLON.Tools.ToRadians(-10),BABYLON.Tools.ToRadians(180),BABYLON.Tools.ToRadians(0));var t=new BABYLON.StandardMaterial("orbitMatl",e);t.diffuseTexture=new BABYLON.Texture("front/textures/home/planets/earthSceneOrbit2.png",e),t.diffuseTexture.hasAlpha=!0,t.backFaceCulling=!1,solarOrbit.material=t,solarOrbit.material.freeze(),solarOrbit.freezeWorldMatrix()}function add_hdr_environment(e){var t=new BABYLON.CubeTexture.CreateFromPrefilteredData("front/textures/environment.dds",e);t.gammaSpace=!1,t.level=.5,e.environmentTexture=t}function enable_init_webcamera(e){var t=!1;(initWebCamScreen=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen",{radius:110,tessellation:0},e)).position=new BABYLON.Vector3(3536,461,-648),initWebCamScreen.isPickable=!1,(initWebCamScreen22=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen22",{radius:110,tessellation:0},e)).position=new BABYLON.Vector3(3536,461,-648),sun&&initWebCamScreen.setParent(sun),initWebCamScreen.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen22.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen.setEnabled(!1),initWebCamScreen.isVisible=!1,initWebCamScreen22.setEnabled(!1),initWebCamScreen22.isVisible=!1;var n=new BABYLON.StandardMaterial("initWebCamScreenTexture",e);n.specularColor=new BABYLON.Color3(0,0,0),n.backFaceCulling=!1;var i=new BABYLON.StandardMaterial("initWebCamScreenTexture",e);i.specularColor=new BABYLON.Color3(0,0,0),i.backFaceCulling=!1,initWebCamScreen22.material=i,BABYLON.VideoTexture.CreateFromWebCam(e,function(e){initVideo=e,n.diffuseTexture=initVideo},{maxWidth:256,maxHeight:256}),e.onBeforeRenderObservable.add(function(){void 0!==initVideo&&0==t&&4==initVideo.video.readyState&&(initWebCamScreen.material=n,t=!0)})}var sun,planetAxis=new BABYLON.Vector3(0,4,0),redAngle=.01,yellowAngle=.02,grayAngle=-.01;let sunOrigTexture,TEXTURE_PATH="front/textures/home/planets/";function create_planets(e){try{for(const[t,n]of planetsMap.entries())if("sun"===t){let i=init_planet(t,t+"matl",TEXTURE_PATH+n[0],TEXTURE_PATH+n[1],n[2],n[3],e);sun=i,sunOrigTexture=i.material.diffuseTexture}else if("saturn"===t){create_saturn_ring(init_planet(t,t+"matl",TEXTURE_PATH+n[0],TEXTURE_PATH+n[1],n[2],n[3],e),e)}else{let i=sun.clone(t);init_clone_planet(i,t+"matl",TEXTURE_PATH+n[0],TEXTURE_PATH+n[1],n[2],n[3],e),animatePlanetRotation(i,10,200,"venus"===t||"uranus"===t?new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0):new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(360),0))}}catch(e){}}var onOverPlanetOrbit=e=>{let t=document.createElement("span");t.setAttribute("id","planetOrbitLbl");var n=t.style;n.position="absolute",n.color="#00BFFF  ",n.fontFamily="Courgette-Regular",n.fontSize="2rem",n.top=e.pointerY+"px",n.left=e.pointerX+"px",n.cursor="pointer",n.textShadow="1px 1px 3px black";let i=e.meshUnderPointer.name;if(wikiMap.has(i)&&!isAstronautClicked){let e=wikiMap.get(i);e?t.setAttribute("onclick","showPage('"+e+"')"):t.setAttribute("onclick","showPage('"+i+"')")}document.body.appendChild(t),t.textContent=e.meshUnderPointer.name},onOutPlanetOrbit=e=>{for(;document.getElementById("planetOrbitLbl");)document.getElementById("planetOrbitLbl").parentNode.removeChild(document.getElementById("planetOrbitLbl"))};let planetOrigScaling;var onOverPlanet=e=>{var t=e.source.name;let n=document.createElement("span");n.setAttribute("id","planetLbl");var i=n.style;if(i.position="absolute",i.lineHeight="1.5em",i.padding="0.2%",i.color="#efad0c  ",i.fontFamily="Courgette-Regular",i.fontSize="1.5em",i.top=e.pointerY+"px",i.left=e.pointerX+"px",i.cursor="pointer",initWebCamScreen&&"sun"==t&&(sun.material.diffuseTexture=initVideo),planetsMap.has(t)){planetOrigScaling=e.meshUnderPointer.scaling;let t=e.meshUnderPointer.scaling;e.meshUnderPointer.scaling=new BABYLON.Vector3(1.1*t.x,1.1*t.y,1.1*t.z)}},onOutPlanet=e=>{for(isMobile()||(sun.material.diffuseTexture=sunOrigTexture),planetsMap.has(e.meshUnderPointer.name)&&(e.meshUnderPointer.scaling=planetOrigScaling);document.getElementById("planetLbl");)document.getElementById("planetLbl").parentNode.removeChild(document.getElementById("planetLbl"))};let earthAnimation;var animatePlanetRotation=function(e,t,n,i){let a=BABYLON.Animation.CreateAndStartAnimation("objRot",e,"rotation",t,n,e.rotation,i,1,null);e===earthNormal_object&&(earthAnimation=a)};function create_saturn_ring(e,t){var n=BABYLON.Mesh.CreateGround("rings",490,490,1,t);n.isPickable=!1,n.parent=e,e.rotationQuaternion=new BABYLON.Quaternion(.28,.18,.02,.94);var i=new BABYLON.StandardMaterial("ringsMaterial",t);i.diffuseTexture=new BABYLON.Texture(TEXTURE_PATH+"saturnRing2.png",t),i.diffuseTexture.hasAlpha=!0,i.backFaceCulling=!1,n.material=i}function init_planet(e,t,n,i,a,r,o){var l=BABYLON.Mesh.CreateSphere(e,0,r,o);l.position=new BABYLON.Vector3(a.x,a.y,a.z);var s=new BABYLON.StandardMaterial(t,o);return s.diffuseTexture=new BABYLON.Texture(n,o),s.bumpTexture=new BABYLON.Texture(i,o),s.specularColor=new BABYLON.Color3(0,0,0),l.material=s,l.convertToUnIndexedMesh(),l.actionManager=new BABYLON.ActionManager(o),l.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanet)),l.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanet)),l}function init_clone_planet(e,t,n,i,a,r,o){e.position=new BABYLON.Vector3(a.x,a.y,a.z),e.scaling=new BABYLON.Vector3(r,r,r);var l=new BABYLON.StandardMaterial(t,o);l.diffuseTexture=new BABYLON.Texture(n,o),l.bumpTexture=new BABYLON.Texture(i,o),l.specularColor=new BABYLON.Color3(0,0,0),e.material=l,e.material.freeze(),e.convertToUnIndexedMesh(),e.actionManager=new BABYLON.ActionManager(o),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanet)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanet))}let earthOrbit,marsOrbit,venusOrbit,mercuryOrbit,neptuneOrbit,ORBIT_TEXTURE_PATH="front/textures/participate/";function init_planet_orbit(e,t,n,i,a,r,o){var l;"Earth"===e?(l=BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o),earthOrbit=l):"Venus"===e?(l=BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o),venusOrbit=l):"Mars"===e?(l=BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o),marsOrbit=l):"Neptune"===e?(l=BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o),neptuneOrbit=l):"Mercury"===e?(l=BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o),mercuryOrbit=l):l="Saturn"===e?venusOrbit.createInstance(e):"Uranus"===e?mercuryOrbit.createInstance(e):"Moon"===e?neptuneOrbit.createInstance(e):"Sun"===e?BABYLON.MeshBuilder.CreateDisc(e,{radius:r,tessellation:0},o):marsOrbit.createInstance(e),"Saturn"===e?l.rotationQuaternion=new BABYLON.Quaternion(-.471,.112,.142,.859):"Pluto"===e?l.rotationQuaternion=new BABYLON.Quaternion(.692,.143,.143,.692):l.rotation=new BABYLON.Vector3(BABYLON.Tools.ToRadians(i.x),BABYLON.Tools.ToRadians(i.y),BABYLON.Tools.ToRadians(i.z)),l.position=new BABYLON.Vector3(n.x,n.y,n.z),l.scaling=new BABYLON.Vector3(a,a,a);var s=new BABYLON.StandardMaterial(e+"Matl",o);return s.diffuseTexture=new BABYLON.Texture(ORBIT_TEXTURE_PATH+t,o),s.diffuseTexture.hasAlpha=!0,l.material=s,l.material.backFaceCulling=!1,l}let planetOrbitsObjMap=new Map;function create_planet_orbit(e){try{for(const[t,n]of planetOrbitsMap.entries()){let i=init_planet_orbit(t,n[0],n[1],n[2],n[3],n[4],e);planetOrbitsObjMap.set(i.name,i),i.actionManager=new BABYLON.ActionManager(e),i.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbit)),i.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbit))}}catch(e){}}let starsObjMap=new Map;function init_clone_constellation(e,t,n,i,a,r,o,l){t.position=new BABYLON.Vector3(a,r,o),t.name=e,t.scaling=new BABYLON.Vector3(i,i,i);var s=new BABYLON.StandardMaterial("starsMatl",l);s.diffuseTexture=new BABYLON.Texture(n,l),s.diffuseTexture.hasAlpha=!0,t.material=s,t.actionManager=new BABYLON.ActionManager(l),t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbit)),t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbit)),"Gemini"===e?t.rotationQuaternion=new BABYLON.Quaternion(.149,.729,.179,.632):"Virgo"===e?t.rotationQuaternion=new BABYLON.Quaternion(.0105,.707,-.014,-.702):"Pisces"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.005,-.698,-.709,.0155):"Sagittarius"===e?t.rotationQuaternion=new BABYLON.Quaternion(.411,-.562,.589,.389):"Capricorn"===e?t.rotationQuaternion=new BABYLON.Quaternion(.694,.0323,-.106,.702):"Libra"===e?t.rotationQuaternion=new BABYLON.Quaternion(.152,-.945,.043,.256):"Aries"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0299,.158,.07,.976):"Cancer"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0469,-.889,.427,.055):"Scorpio"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0297,.132,.213,.954):"Taurus"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.703,.01,.0256,.695):"Aquarius"===e&&(t.rotationQuaternion=new BABYLON.Quaternion(-.032,-.71,.027,.687)),starsObjMap.set(t.name,t)}var leoStars,geminiStars;function create_constellation_planes(e){(leoStars=BABYLON.MeshBuilder.CreatePlane("Leo",{height:150,width:300},e)).scaling=new BABYLON.Vector3(14,14,14),leoStars.position=new BABYLON.Vector3(-2877,4345,1908),leoStars.rotationQuaternion=new BABYLON.Quaternion(-.553,.438,.438,.553);var t=new BABYLON.StandardMaterial("leoMatl",e);t.diffuseTexture=new BABYLON.Texture("front/textures/participate/constellations/leo.png",e),t.diffuseTexture.hasAlpha=!0,leoStars.material=t,leoStars.material.backFaceCulling=!1,leoStars.freezeWorldMatrix(),leoStars.actionManager=new BABYLON.ActionManager(e),leoStars.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbit)),leoStars.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbit)),starsObjMap.set(leoStars.name,leoStars),init_clone_constellation("Gemini",geminiStars=leoStars.clone(),"front/textures/participate/constellations/gemini.png",14,4227,2823,806,e),virgoStars=leoStars.clone(),init_clone_constellation("Virgo",virgoStars,"front/textures/participate/constellations/virgo.png",14,-4242,2864,-9,e),piscesStars=leoStars.clone(),init_clone_constellation("Pisces",piscesStars,"front/textures/participate/constellations/pisces.png",14,942,4350,1731,e),sagittariusStars=leoStars.clone(),init_clone_constellation("Sagittarius",sagittariusStars,"front/textures/participate/constellations/sagittarius.png",14,2917,-4081,614,e),capricornStars=leoStars.clone(),init_clone_constellation("Capricorn",capricornStars,"front/textures/participate/constellations/capricorn.png",14,-1996,-3873,2e3,e),libraStars=leoStars.clone(),init_clone_constellation("Libra",libraStars,"front/textures/participate/constellations/libra.png",14,-766,1584,-3235,e),ariesStars=leoStars.clone(),init_clone_constellation("Aries",ariesStars,"front/textures/participate/constellations/aries2.png",14,664,3268,5197,e),cancerStars=leoStars.clone(),init_clone_constellation("Cancer",cancerStars,"front/textures/participate/constellations/cancer.png",14,-417,-3774,-2125,e),scorpioStars=leoStars.clone(),init_clone_constellation("Scorpio",scorpioStars,"front/textures/participate/constellations/scorpio.png",14,1e3,-2362,5218,e),taurusStars=leoStars.clone(),init_clone_constellation("Taurus",taurusStars,"front/textures/participate/constellations/taurus.png",14,-121,4275,-982,e),aquariusStars=leoStars.clone(),init_clone_constellation("Aquarius",aquariusStars,"front/textures/participate/constellations/aquarius.png",14,-4223,-2058,773,e)}let homeGizmo,homeGizmo2,isGizmoDragging=!1;function enable_gizmo(e,t){let n=new BABYLON.UtilityLayerRenderer(t);homeGizmo=new BABYLON.PositionGizmo(n),homeGizmo2=new BABYLON.RotationGizmo(n),n.utilityLayerScene.autoClearDepthAndStencil=!1,homeGizmo.attachedMesh=e,homeGizmo.scaleRatio=2,homeGizmo2.attachedMesh=e}$("#wikiPage").on("load",function(){$(".iframe-loading").hide()});let isScreenVisible=!1;function showPage(e){$(".iframe-loading").show();let t=document.getElementById("wikiPage"),n=document.getElementById("planetWikipediaDiv");t.src="https://en.wikipedia.org/wiki/"+e,document.getElementById("page-url").href="https://en.wikipedia.org/wiki/"+e,document.getElementById("page-url-span").textContent="https://en.wikipedia.org/wiki/"+e,"visible"!=n.style.visibility&&(n.style.visibility="visible",isScreenVisible=!0)}function hidePage(e){document.getElementById("planetWikipediaDiv").style.visibility="hidden",document.getElementById("wikiPage").src="",document.getElementById("iframe-loading").style.visibility="hidden",isScreenVisible=!1}let isWikiFullscreen=!1;$("#planetWikiHeader #fullscreen-btn, #planetWikiHeader #minimize-btn").on("click",function(e){isWikiFullscreen?(isMobile()&&isSmallDevice()?$("#planetWikipediaDiv").css("width","50vw"):$("#planetWikipediaDiv").css("width","30vw"),$("#planetWikiHeader #fullscreen-btn").show(),$("#planetWikiHeader #minimize-btn").hide(),window.innerHeight!==window.screen.height||window.innerWidth!==window.screen.width?$("#fullscreenIcon").show():$("#fullscreenIcon").hide()):($("#planetWikipediaDiv").css({width:"100vw",height:"100%"}),isSmallDevice()&&isMobile()?$("#planetWikiHeader").css("height","10%"):(isMediumDevice()&&isMobile(),$("#planetWikiHeader").css("height","4%")),$("#planetWikiHeader #fullscreen-btn").hide(),$("#planetWikiHeader #minimize-btn").show(),$("#fullscreenIcon").hide()),isWikiFullscreen=!isWikiFullscreen}),$("#planetWikiHeader #close-btn").on("click",function(e){document.getElementById("planetWikipediaDiv").style.visibility="hidden",isMobile()&&isSmallDevice()?$("#planetWikipediaDiv").css("width","50vw"):$("#planetWikipediaDiv").css("width","30vw"),$("#planetWikiHeader #fullscreen-btn").show(),$("#planetWikiHeader #minimize-btn").hide(),testFullscreen()});