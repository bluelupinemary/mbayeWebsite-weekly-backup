var homeScene,initCamera,initLight,initSkybox,mbayeTask,mbayeObject,mercury,venus,earth,earthMoon,mars,jupiter,saturn,neptune,pluto,sun;const LOWER_RADIUS_VAL=1,UPPER_RADIUS_VAL=3e3;var isHomeReady=!1;let theCurrRadius,isCharViewActive=!1,charImgMap=new Map([["InitialView",[{x:0,y:0,z:0},2.4706,1.2283,1400]],["Ruru",[{x:463,y:3988,z:-1858},2.3873,1.5126,.1]],["Solar",[{x:-1581,y:-2052,z:-83},2.4736,1.2661,100]],["Ally",[{x:-834,y:1781,z:4093},4.4214,1.4373,30]],["William",[{x:2810,y:3902,z:1922},3.1701,1.552,.1]],["Villa",[{x:-885,y:-4200,z:4160},4.8796,1.4463,.1]],["Bruce",[{x:-5617,y:-856,z:-1729},6.549,1.4465,.1]],["Trevor",[{x:-3140,y:1746,z:-3836},1.0788,1.5568,30]],["Manny",[{x:3237,y:-696,z:3860},4.3098,1.5425,.1]]]);function createScene(){return engine.enableOfflineSupport=!0,BABYLON.Database.IDBStorageEnabled=!0,homeScene=new BABYLON.Scene(engine),initCamera=create_init_camera(),create_init_light(),initSkybox=create_init_skybox(),load_home_meshes(),create_home_planets(),create_home_halo(),create_home_labels(),add_home_mouse_listener(),enable_init_webcamera(),create_characters(),create_video_functions(),homeScene.collisionsEnabled=!0,hl=new BABYLON.HighlightLayer("hl1",homeScene),homeScene}function create_init_camera(){let e=new BABYLON.ArcRotateCamera("Initial Camera",BABYLON.Tools.ToRadians(0),BABYLON.Tools.ToRadians(0),30,new BABYLON.Vector3(-1135,486,900),homeScene);return e.allowUpsideDown=!1,e.fovMode=BABYLON.Camera.FOVMODE_HORIZONTAL_FIXED,e.fov=1.4,e.lowerRadiusLimit=.1,e.upperRadiusLimit=UPPER_RADIUS_VAL,e.wheelPrecision=1,e.angularSensibilityX=4e3,e.angularSensibilityY=4e3,e.panningSensibility=10,e.upperBetaLimit=10,e.panningDistanceLimit=6e3,e.attachControl(canvas,!0),e.pinchPrecision=1,homeScene.activeCamera=e,e.maxZ=25e3,e}var planetsLight,mbayeInit_object,mbayeInitTask,initEarth_object,agreeCameraUseDisc,homeHalo;function create_init_light(){(initLight=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(0,-50,1e3),homeScene)).radius=1e3,initLight.specular=new BABYLON.Color3(0,0,0),initLight.diffuse=new BABYLON.Color3(1,1,1),initLight.groundColor=new BABYLON.Color3(1,1,1),initLight.intensity=1.3,(planetsLight=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(0,-50,700),homeScene)).radius=500,planetsLight.specular=new BABYLON.Color3(0,0,0),planetsLight.diffuse=new BABYLON.Color3(1,1,1),planetsLight.groundColor=new BABYLON.Color3(.1,.1,.1),planetsLight.intensity=1}function create_init_skybox(){var e=BABYLON.MeshBuilder.CreateBox("initSkybox",{size:2e4},homeScene);e.position=new BABYLON.Vector3(942,-500,-1500),e.rotation.y=BABYLON.Tools.ToRadians(-60),e.isPickable=!1,e.infiniteDistance=!0;var n=new BABYLON.StandardMaterial("initSkyboxMaterial",homeScene);n.backFaceCulling=!1;return n.reflectionTexture=new BABYLON.CubeTexture.CreateFromImages(["front/finalSkybox/px.png","front/finalSkybox/py.png","front/finalSkybox/pz.png","front/finalSkybox/nx.png","front/finalSkybox/ny.png","front/finalSkybox/nz.png"],homeScene),n.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,n.disableLighting=!0,n.specular=new BABYLON.Vector3(0,0,0),e.material=n,e.checkCollisions=!0,n.freeze(),e.freezeWorldMatrix(),e}function load_home_meshes(){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/homeScene/","homeDisc.glb",homeScene).then(function(e){for(var n=0;n<e.meshes.length;n++)"top"===e.meshes[n].name?add_action_mgr(videoHome_obj=e.meshes[n]):"bot"===e.meshes[n].name&&((videoHome_obj2=e.meshes[n]).isPickable=!1,videoHome_obj2.name="top");e.meshes[1].isVisible=!1,e.meshes[1].setParent(e.meshes[3]),e.meshes[2].setParent(e.meshes[3]),e.meshes[4].setParent(e.meshes[3]),agreeCameraUseDisc=e.meshes[1],"Safari"===testBrowser()?(e.meshes[3].position=new BABYLON.Vector3(-41.27,37.91,-58.68),e.meshes[3].rotationQuaternion=new BABYLON.Quaternion(.8909,-.0453,-.4411,-.0977)):(e.meshes[3].position=new BABYLON.Vector3(-54,-10,-68),e.meshes[3].rotationQuaternion=new BABYLON.Quaternion(.0437,.891,.0985,-.4409))})]).then(()=>{add_video_to_mesh(1),initLight.includedOnlyMeshes.push(videoHome_obj),initLight.includedOnlyMeshes.push(videoHome_obj2),initLight.includedOnlyMeshes.push(agreeCameraUseDisc),initCamera.target=new BABYLON.Vector3(0,0,0),initCamera.radius=1400})}function create_home_halo(){var e=BABYLON.MeshBuilder.CreatePlane("homeHalo",{height:1200,width:2250},homeScene);e.position=new BABYLON.Vector3(26,40,-50),e.rotation=new BABYLON.Vector3(BABYLON.Tools.ToRadians(75),BABYLON.Tools.ToRadians(128),0);var n=new BABYLON.StandardMaterial("plane1",homeScene);n.diffuseTexture=new BABYLON.Texture("front/textures/home/haloThin2.png",homeScene),n.opacityTexture=new BABYLON.Texture("front/textures/home/haloThin2.png",homeScene),n.alpha=.9,n.backFaceCulling=!1,e.material=n,e.isPickable=!1,homeHalo=e,initLight.includedOnlyMeshes.push(homeHalo)}let venusInfoTxt,videoTexture,videoTexture2,discvideoTexture,videoHome_obj,videoHome_obj2,theVideoMatl,webCamScreen,myVideo;function create_home_labels(){initLight.includedOnlyMeshes.push(init_planet_label("participate","front/textures/home/planetText/participate.png",175,325,945,198,526)),initLight.includedOnlyMeshes.push(init_planet_label("design","front/textures/home/planetText/design.png",110,200,792,133,472)),initLight.includedOnlyMeshes.push(init_planet_label("member","front/textures/home/planetText/member.png",110,200,913,490,-1443)),initLight.includedOnlyMeshes.push(init_planet_label("special","front/textures/home/planetText/special.png",135,200,-413,202,-919)),initLight.includedOnlyMeshes.push(init_planet_label("captain","front/textures/home/planetText/captain.png",100,120,-854,55,100)),initLight.includedOnlyMeshes.push(init_planet_label("building","front/textures/home/planetText/building.png",135,200,122,-177,823)),initLight.includedOnlyMeshes.push(init_planet_label("story","front/textures/home/planetText/story.png",110,200,1024,349,-2269)),initLight.includedOnlyMeshes.push(init_planet_label("visit","front/textures/home/planetText/flower.png",220,350,1305,91,-682)),initLight.includedOnlyMeshes.push(init_planet_label("flower","front/textures/home/planetText/visit.png",200,300,1209,283,-1315)),initLight.includedOnlyMeshes.push(init_planet_label("contact","front/textures/home/planetText/careers.png",80,150,-50,-273,366)),(venusInfoTxt=init_planet_label("venusInfo","front/textures/home/venusHover.png",200,400,-413,400,-919)).isVisible=!1,initLight.includedOnlyMeshes.push(venusInfoTxt)}function init_planet_label(e,n,t,i,o,a,r){var l=BABYLON.MeshBuilder.CreatePlane(e,{height:t,width:i},homeScene);l.position=new BABYLON.Vector3(o,a,r);let s=new BABYLON.StandardMaterial("labelMal",homeScene);return s.diffuseTexture=new BABYLON.Texture(n,homeScene),s.opacityTexture=new BABYLON.Texture(n,homeScene),s.alpha=.9,s.backFaceCulling=!1,l.isPickable=!1,l.rotationQuaternion="participate"===e?new BABYLON.Quaternion(0,.7315,0,.6817):"design"===e?new BABYLON.Quaternion(.0189,.7312,.0176,.6814):"special"===e?new BABYLON.Quaternion(.025,.9679,-.1088,.224):"captain"===e?new BABYLON.Quaternion(.0682,.9388,.0407,.3346):"visit"===e?new BABYLON.Quaternion(.0817,.7915,.0937,.5979):"flower"===e?new BABYLON.Quaternion(-.0176,.927,.0615,.369):"member"===e?new BABYLON.Quaternion(-.0124,.9133,.0279,.4056):"story"===e?new BABYLON.Quaternion(.2328,.9158,.1327,.2985):"building"===e?new BABYLON.Quaternion(.0393,.8215,-.1371,.5518):"contact"===e?new BABYLON.Quaternion(.0727,.8678,-.1614,.4633):"venusInfo"===e?new BABYLON.Quaternion(0,.9814,-5e-4,.1912):new BABYLON.Quaternion(0,.7315,0,.6817),l.material=s,l}function create_video_functions(){let e=init_music_icon("playIcon","playMusic.png",100,100,{x:-142,y:-40,z:95},{x:-.3377,y:.5646,z:.7043,w:.266}),n=init_music_icon("pauseIcon","pauseMusic.png",100,100,{x:-142,y:-39,z:95},{x:-.3377,y:.5646,z:.7043,w:.266});(isSmallDevice()||isMobile())&&(e.position=new BABYLON.Vector3(347,102,-303),n.position=new BABYLON.Vector3(347,102,-303),e.isVisible=!0,n.isVisible=!0,e.isPickable=!0,n.isPickable=!0)}function init_music_icon(e,n,t,i,o,a){let r=BABYLON.MeshBuilder.CreatePlane(e,{width:t,height:i},homeScene);r.position=new BABYLON.Vector3(o.x,o.y,o.z),r.rotationQuaternion=new BABYLON.Quaternion(a.x,a.y,a.z,a.w),r.isVisible=!1;var l=new BABYLON.StandardMaterial(e+"Matl",homeScene);return l.diffuseTexture=new BABYLON.Texture("front/images3D/"+n,homeScene),l.opacityTexture=new BABYLON.Texture("front/images3D/"+n,homeScene),l.backFaceCulling=!1,r.material=l,initLight.includedOnlyMeshes.push(r),r}function add_video_to_mesh(e){let n=new BABYLON.StandardMaterial("videoMat",homeScene);if(!discvideoTexture){discvideoTexture=new BABYLON.VideoTexture("discVideo1",["front/videos/homeIntro.webm","front/videos/homeIntro.mp4"],homeScene,!0,!1,{streaming:!0,autoplay:!0}),n.backFaceCulling=!1,"Safari"===testBrowser()?(discvideoTexture.uOffset=0,discvideoTexture.vOffset=.02,discvideoTexture.uScale=1.03,discvideoTexture.vScale=2.51,discvideoTexture.uAng=1.078):(discvideoTexture.uOffset=.04,discvideoTexture.vOffset=.14,discvideoTexture.uScale=-1.1,discvideoTexture.vScale=1.15),n.diffuseTexture=discvideoTexture,videoHome_obj.material=n,discvideoTexture.video.loop=!0,discvideoTexture.video.autoUpdateTexture=!0,discvideoTexture.video.pause(),theVideoMatl=n}}let homeSun,homeMercury,homeVenus,homeEarth,homeMars,homeJupiter,homeSaturn,homeUranus,homeNeptune,homePluto,homeMoon,isAssignedWebcam=!1,isWebcamEnabled=!0;function enable_webcamera(){let e=new BABYLON.StandardMaterial("webCamScreenTexture",homeScene);e.specularColor=new BABYLON.Color3(0,0,0),e.backFaceCulling=!1,BABYLON.VideoTexture.CreateFromWebCam(homeScene,function(n){n.vScale=-1,myVideo=n,e.diffuseTexture=myVideo},{maxWidth:256,maxHeight:256})}let sunOrigTexture,sunGlowLayer,planetAxis=new BABYLON.Vector3(0,4,0),redAngle=-.01,yellowAngle=-.02,grayAngle=.005;function create_home_planets(){homeSun=init_planet("sun","sunMatl","front/textures/home/planets/sun.jpg","front/textures/home/planets/sunnormal.jpg",3755,463,-716,250),(sunGlowLayer=new BABYLON.GlowLayer("glow",homeScene)).customEmissiveColorSelector=function(e,n,t,i){"sun"===e.name?i.set(235,192,52,.2):i.set(0,0,0,0)},init_clone_planet(homeMercury=homeSun.clone("homeMercury"),"mercuryMatl","front/textures/home/planets/mercury.jpg","front/textures/home/planets/mercurynormal.jpg",954,500,-1499,.5),init_clone_planet(homeVenus=homeSun.clone("homeVenus"),"venusMatl","front/textures/home/planets/venus.jpg","front/textures/home/planets/venusnormal.jpg",-384,201,-1e3,.6),init_clone_planet(homeEarth=homeSun.clone("homeEarth"),"earthMatl","front/textures/home/planets/earth.jpg","textures/planets2/normals/earthnormal.png",1076.28,178.44,515,.95),init_clone_planet(homeMoon=homeSun.clone("homeMoon"),"moonMatl","front/textures/home/planets/moon.jpg","front/textures/home/planets/moonnormal.jpg",840,129,465,.35),init_clone_planet(homeMars=homeSun.clone("homeMars"),"marsMatl","front/textures/home/planets/mars.jpg","front/textures/home/planets/marsnormal.jpg",-837,38,55,.32),init_clone_planet(homeJupiter=homeSun.clone("homeJupiter"),"jupiterMatl","front/textures/home/planets/jupiter.jpg","front/textures/home/planets/jupiternormal.jpg",215,-212,821,.6),homeSaturn=init_planet("homeSaturn","saturnMatl","front/textures/home/planets/saturn.jpg","front/textures/home/planets/saturnnormal.jpg",1091,328,-2390,150);let e=BABYLON.Mesh.CreateGround("rings",335,335,1,homeScene);e.parent=homeSaturn,homeSaturn.rotationQuaternion=new BABYLON.Quaternion(.2302,.245,-.105,.932);let n=new BABYLON.StandardMaterial("ringsMaterial",homeScene);n.diffuseTexture=new BABYLON.Texture("front/textures/home/planets/saturnRing2.png",homeScene),n.diffuseTexture.hasAlpha=!0,n.backFaceCulling=!1,e.material=n,init_clone_planet(homeUranus=homeSun.clone("homeUranus"),"uranusMatl","front/textures/home/planets/uranus3.jpg","front/textures/home/planets/uranusnormal.jpg",1412,55,-732,.8);let t=BABYLON.Mesh.CreateGround("uranusRing",490,490,1,homeScene);t.parent=homeUranus;let i=new BABYLON.StandardMaterial("ringsMaterial",homeScene);i.diffuseTexture=new BABYLON.Texture("front/textures/home/planets/uranusRing.png",homeScene),i.opacityTexture=new BABYLON.Texture("front/textures/home/planets/uranusRing.png",homeScene),i.alpha=.9,i.diffuseTexture.hasAlpha=!0,i.backFaceCulling=!1,t.material=i,init_clone_planet(homeNeptune=homeSun.clone("homeNeptune"),"neptuneMatl","front/textures/home/planets/neptune.jpg","front/textures/home/planets/neptunenormal.jpg",1326,259,-1414,.7),init_clone_planet(homePluto=homeSun.clone("homePluto"),"plutoMatl","front/textures/home/planets/pluto.jpg","front/textures/home/planets/plutonormal.jpg",.21,-300,346,.4),initLight.includedOnlyMeshes.push(homeSun),initLight.includedOnlyMeshes.push(homeEarth),planetsLight.includedOnlyMeshes.push(homeMercury),planetsLight.includedOnlyMeshes.push(homeVenus),planetsLight.includedOnlyMeshes.push(homeMars),planetsLight.includedOnlyMeshes.push(homeJupiter),planetsLight.includedOnlyMeshes.push(homeSaturn),planetsLight.includedOnlyMeshes.push(homeUranus),planetsLight.includedOnlyMeshes.push(homeNeptune),planetsLight.includedOnlyMeshes.push(homePluto),planetsLight.includedOnlyMeshes.push(homeMoon),planetsLight.includedOnlyMeshes.push(e),initLight.includedOnlyMeshes.push(t),add_action_mgr(homeMercury),add_action_mgr(homeVenus),add_action_mgr(homeEarth),add_action_mgr(homeMars),add_action_mgr(homeJupiter),add_action_mgr(homeSaturn),add_action_mgr(homeUranus),add_action_mgr(homeNeptune),add_action_mgr(homePluto),add_action_mgr(homeMoon),add_action_mgr(homeSun),homeSun.actionManager=new BABYLON.ActionManager(homeScene),homeSun.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverSun)),homeSun.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutSun)),engine.runRenderLoop(function(){homeScene&&(homeMercury.rotation.y=Math.PI/2,homeMercury.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL),homeVenus.rotation.y=Math.PI/2,homeVenus.rotate(planetAxis,grayAngle,BABYLON.Space.LOCAL),homeEarth.rotation.y=Math.PI/2,homeEarth.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL),homeMoon.rotation.y=Math.PI/2,homeMoon.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL),homeMars.rotation.y=Math.PI/2,homeMars.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL),homeJupiter.rotation.y=Math.PI/2,homeJupiter.rotate(planetAxis,yellowAngle,BABYLON.Space.LOCAL),homeSaturn.rotation.y=Math.PI/2,homeSaturn.rotate(planetAxis,yellowAngle,BABYLON.Space.LOCAL),homeUranus.rotation.y=Math.PI/2,homeUranus.rotate(planetAxis,yellowAngle,BABYLON.Space.LOCAL),homeNeptune.rotation.y=Math.PI/2,homeNeptune.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL),homePluto.rotation.y=Math.PI/2,homePluto.rotate(planetAxis,redAngle,BABYLON.Space.LOCAL))})}let homeGizmo,charTooltip,planetsMap=new Map;function init_planet(e,n,t,i,o,a,r,l){let s=BABYLON.Mesh.CreateSphere(e,0,l,homeScene);s.position=new BABYLON.Vector3(o,a,r);let c=new BABYLON.StandardMaterial(n,homeScene);return c.diffuseTexture=new BABYLON.Texture(t,homeScene),c.bumpTexture=new BABYLON.Texture(i,homeScene),c.specularColor=new BABYLON.Color3(0,0,0),s.material=c,planetsMap.set(s.name),"sun"===e&&(sunOrigTexture=c.diffuseTexture),s}function init_clone_planet(e,n,t,i,o,a,r,l){e.position=new BABYLON.Vector3(o,a,r),e.scaling=new BABYLON.Vector3(l,l,l);let s=new BABYLON.StandardMaterial(n,homeScene);s.diffuseTexture=new BABYLON.Texture(t,homeScene),s.bumpTexture=new BABYLON.Texture(i,homeScene),s.specularColor=new BABYLON.Color3(0,0,0),e.material=s,e.material.freeze(),e.convertToUnIndexedMesh(),"homeUranus"===e.name?e.rotationQuaternion=new BABYLON.Quaternion(.1342,.0422,-.0156,.9898):"homeJupiter"===e.name?e.rotationQuaternion=new BABYLON.Quaternion(-.1126,.148,-.1873,.9645):"homeMars"===e.name&&(e.rotationQuaternion=new BABYLON.Quaternion(-.0111,.0016,-.1497,.9886)),planetsMap.set(e.name)}function enable_home_gizmo(e){let n=new BABYLON.UtilityLayerRenderer(homeScene);n.utilityLayerScene.autoClearDepthAndStencil=!1,homeGizmo=new BABYLON.PositionGizmo(n),homeGizmo2=new BABYLON.RotationGizmo(n),homeGizmo.attachedMesh=e,homeGizmo.scaleRatio=2,homeGizmo2.attachedMesh=e}var onOverPlanet=e=>{if(charImgMap.has(e.source.name)){(charTooltip=document.createElement("span")).setAttribute("id","charTooltip");var n=charTooltip.style;n.position="absolute",n.lineHeight="1.2em",n.padding="0.2%",n.color="#00BFFF",n.fontFamily="Courgette-Regular",n.fontSize="1.5em",n.top=homeScene.pointerY-50+"px",n.left=homeScene.pointerX+50+"px",n.cursor="pointer",document.body.appendChild(charTooltip),currCamTarget!=e.source.name?charTooltip.textContent="View":charTooltip.textContent="Return",origScaling=e.source.scaling,e.source.scaling=new BABYLON.Vector3(1.1*origScaling.x,1.1*origScaling.y,1.1*origScaling.z)}else planetsMap.has(e.source.name)?(origScaling=e.source.scaling,e.source.scaling=new BABYLON.Vector3(1.1*origScaling.x,1.1*origScaling.y,1.1*origScaling.z)):"top"!==e.source.name||isSmallDevice()||isMobile()||(isVideoPlaying?homeScene.getMeshByName("pauseIcon").isVisible=!0:homeScene.getMeshByName("playIcon").isVisible=!0);"homeVenus"===e.source.name&&(venusInfoTxt.isVisible=!0)},onOutPlanet=e=>{if(charImgMap.has(e.source.name)){for(;document.getElementById("charTooltip");)document.getElementById("charTooltip").parentNode.removeChild(document.getElementById("charTooltip"));e.source.scaling=origScaling,venusInfoTxt.isVisible=!1}else planetsMap.has(e.source.name)&&(e.source.scaling=origScaling,venusInfoTxt.isVisible=!1);"top"!==e.source.name||isSmallDevice()||isMobile()||(homeScene.getMeshByName("pauseIcon").isVisible=!1,homeScene.getMeshByName("playIcon").isVisible=!1)},onOverSun=e=>{var n=e.source.id;let t=document.createElement("span");t.setAttribute("id","sunLbl");var i=t.style;i.position="absolute",i.lineHeight="1.5em",i.padding="0.2%",i.color="#efad0c",i.fontFamily="Courgette-Regular",i.fontSize="1.5em",i.top=e.pointerY+"px",i.left=e.pointerX+"px",i.cursor="pointer",initWebCamScreen&&"sun"==n&&(homeSun.material.diffuseTexture=initVideo,sunGlowLayer.intensity=0,document.body.appendChild(t),t.textContent="All About You")},onOutSun=e=>{for(isMobile()||(homeSun.material.diffuseTexture=sunOrigTexture);document.getElementById("sunLbl");)document.getElementById("sunLbl").parentNode.removeChild(document.getElementById("sunLbl"));sunGlowLayer.intensity=1};function add_action_mgr(e){e.actionManager=new BABYLON.ActionManager(homeScene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanet)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanet))}function create_characters(){let e=init_char_image("Solar","solarSitting2.png",1100,898,{x:1315,y:-2825,z:-315.96},{x:-.061,y:-.8762,z:.1403,w:-.4562});init_scrollable_viewer("SolarText","solarText.png",3e3,2e3,{x:37,y:-2810,z:-1934},{x:-.0659,y:-.8884,z:.1383,w:-.4323}),add_action_mgr(e);let n=init_char_image("Ruru","ruruHome.png",1e3,433,{x:2136,y:3857,z:-2348},{x:-.0112,y:-.9151,z:9e-4,w:-.4019});init_scrollable_viewer("RuruText","ruruText.png",1542,1e3,{x:1265,y:3912,z:-3125},{x:.0089,y:.9193,z:-.0253,w:.3919}),add_action_mgr(n);let t=init_char_image("Villa","villaHome.png",964,351,{x:-1200,y:-5142,z:6251},{x:.1672,y:-.0551,z:-.013,w:.9841});init_char_image("VillaSpeech","villaText.png",2500,1200,{x:-1172,y:-4203,z:6173},{x:.01112,y:-.089,z:-3e-4,w:.9958}),add_action_mgr(t);let i=init_char_image("Ally","allyHome.png",809,355,{x:-1191,y:1514,z:5634},{x:-.0241,y:-.1397,z:-0,w:-.9894});init_scrollable_viewer("AllyText","allyText.png",1500,850,{x:-318,y:1611,z:5172},{x:-.0623,y:-.1487,z:.0079,w:-.9864}),add_action_mgr(i);let o=init_char_image("Bruce","bruceHome.png",940,775,{x:-7261,y:-1196,z:-3329},{x:.0041,y:.9142,z:-.0261,w:-.4026});init_scrollable_viewer("BruceText","bruceText.png",1500,850,{x:-6938,y:-1022,z:-1801},{x:-.032,y:.7894,z:-.0425,w:-.6108}),add_action_mgr(o);let a=init_char_image("William","williamHome.png",790,390,{x:4100,y:3899,z:2750},{x:-.2367,y:-.6905,z:-.2064,w:-.65});init_scrollable_viewer("WilliamText","williamText.png",1500,850,{x:3981,y:3882,z:1757},{x:-.0082,y:-.6961,z:.0033,w:-.7173}),add_action_mgr(a);let r=init_char_image("Trevor","trevorHome.png",334,646,{x:-3072,y:1720,z:-5227},{x:-.0083,y:.9959,z:-.0414,w:-.0674});init_scrollable_viewer("TrevorText","trevorText.png",1500,850,{x:-3745,y:1732,z:-4736},{x:-.0016,y:.9671,z:-.0066,w:-.2518}),add_action_mgr(r);let l=init_char_image("Manny","mannyHome.png",566,714,{x:3181,y:-755,z:5436},{x:-.0345,y:-.075,z:.0148,w:.9954});init_scrollable_viewer("MannyText","mannyText.png",1500,850,{x:4143,y:-745,z:5165},{x:.0068,y:-.1934,z:-.003,w:-.9803}),add_action_mgr(l)}function init_char_image(e,n,t,i,o,a){let r=BABYLON.MeshBuilder.CreatePlane(e,{width:t,height:i},homeScene);r.position=new BABYLON.Vector3(o.x,o.y,o.z),r.rotationQuaternion=new BABYLON.Quaternion(a.x,a.y,a.z,a.w);var l=new BABYLON.StandardMaterial(e+"Matl",homeScene);return l.diffuseTexture=new BABYLON.Texture("front/images3D/homeScene/"+n,homeScene),l.opacityTexture=new BABYLON.Texture("front/images3D/homeScene/"+n,homeScene),l.backFaceCulling=!1,r.material=l,initLight.includedOnlyMeshes.push(r),r}function init_scrollable_viewer(e,n,t,i,o,a){let r=BABYLON.MeshBuilder.CreatePlane(e,{width:t,height:i},homeScene);r.position=new BABYLON.Vector3(o.x,o.y,o.z),r.rotationQuaternion=new BABYLON.Quaternion(a.x,a.y,a.z,a.w);let l=new BABYLON.StandardMaterial(e+"Matl",homeScene);l.diffuseColor=new BABYLON.Color3(1,0,0),l.backFaceCulling=!1,r.material=l;var s=BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(r),c=new BABYLON.GUI.ScrollViewer;c.thickness=0,c.width=1,c.height=1,c.barColor="green",c.thumbLength=.3,c.thumbHeight=.1,c.verticalBar.border=0,c.barSize=40,(isSmallDevice()||isMobile())&&(c.barSize=60),c.onPointerDownObservable.add(function(){isCharViewActive&&initCamera.detachControl(canvas)}),c.onPointerUpObservable.add(function(){isCharViewActive&&initCamera.attachControl(canvas,!0)}),s.addControl(c);var u=new BABYLON.GUI.Rectangle;u.thickness=0,u.width=1,u.height="TrevorText"===e?17:"MannyText"===e?21:"RuruText"===e?4:"SolarText"===e?9:"BruceText"===e?9:7,u.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,u.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,u.isPickable=!1,c.addControl(u);var m=new BABYLON.GUI.Image(e+"Img","front/images3D/homeScene/"+n);return m.width=1,m.height=1,u.addControl(m),r}let initVideo,initWebCamScreen,initWebCamScreen22,currCamTarget;function enable_init_webcamera(){var e=!1;(initWebCamScreen=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen",{radius:110,tessellation:0},homeScene)).position=new BABYLON.Vector3(3536,461,-648),initWebCamScreen.isPickable=!1,(initWebCamScreen22=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen22",{radius:110,tessellation:0},homeScene)).position=new BABYLON.Vector3(3536,461,-648),homeSun&&initWebCamScreen.setParent(homeSun),initLight.includedOnlyMeshes.push(initWebCamScreen),initLight.includedOnlyMeshes.push(initWebCamScreen22),initWebCamScreen.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen22.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen.setEnabled(!1),initWebCamScreen.isVisible=!1,initWebCamScreen22.setEnabled(!1),initWebCamScreen22.isVisible=!1;var n=new BABYLON.StandardMaterial("initWebCamScreenTexture",homeScene);n.specularColor=new BABYLON.Color3(0,0,0),n.backFaceCulling=!1;var t=new BABYLON.StandardMaterial("initWebCamScreenTexture",homeScene);t.specularColor=new BABYLON.Color3(0,0,0),t.backFaceCulling=!1,initWebCamScreen22.material=t,BABYLON.VideoTexture.CreateFromWebCam(homeScene,function(e){initVideo=e,n.diffuseTexture=initVideo},{maxWidth:256,maxHeight:256}),homeScene.onBeforeRenderObservable.add(function(){void 0!==initVideo&&0==e&&4==initVideo.video.readyState&&(initWebCamScreen.material=n,e=!0)})}let isPlanetClicked,cnt=0;function add_home_mouse_listener(){var e=function(e){if(homeScene){var n=homeScene.pick(homeScene.pointerX,homeScene.pointerY);if(n.hit){let t=n.pickedMesh;if("homeEarth"===t.name?checkScreenAndDoubleClick("participateMbaye"):"homeMercury"===t.name?checkScreenAndDoubleClick("blogview/general/all"):"homeMars"===t.name?checkScreenAndDoubleClick("captainMbaye"):"homeNeptune"===t.name?checkScreenAndDoubleClick("visitingMbaye"):"homeMoon"===t.name?checkScreenAndDoubleClick("blogview/designed-panel/all"):"homePluto"===t.name?checkScreenAndDoubleClick("blogview/tagwise/all?tag=careers"):"homeUranus"===t.name?checkScreenAndDoubleClick("flowersMbaye"):"homeVenus"===t.name?checkScreenAndDoubleClick("somethingSpecial"):"homeJupiter"===t.name&&checkScreenAndDoubleClick(urlStory+"?cNo=1"),"homeSun"!==t.name&&"sun"!==t.name||checkScreenAndDoubleClick("dashboard"),charImgMap.has(t.name)&&0===e.button){let e;currCamTarget!=t.name?(e=charImgMap.get(t.name),currCamTarget=t.name,isCharViewActive=!0,show_overlay_text(3)):(e=charImgMap.get("InitialView"),currCamTarget=null,isCharViewActive=!1,show_overlay_text(4));let n=e[0];initCamera.setTarget(new BABYLON.Vector3(n.x,n.y,n.z)),initCamera.alpha=e[1],initCamera.beta=e[2],initCamera.radius=e[3]}"pauseIcon"===t.name?toggle_video_icons("pause"):"playIcon"===t.name&&toggle_video_icons("play")}}},n=function(e){},t=function(e){};canvas.addEventListener("pointerdown",e,!1),canvas.addEventListener("pointerup",n,!1),canvas.addEventListener("pointermove",t,!1),homeScene.onDispose=function(){canvas.removeEventListener("pointerdown",e),canvas.removeEventListener("pointerup",n),canvas.removeEventListener("pointermove",t)}}function show_overlay_text(e){1==e?($("#instruction-left-div").toggle(),$("#infoIconText").toggle()):2==e?($("#instruction-right-div").toggle(),"Villa"==currCamTarget?$("#cloudImgDiv").css({bottom:"10%",left:"20%",top:"unset"}):$("#cloudImgDiv").css({top:"10%",left:"0"}),$("#cloudImgDiv").toggle()):3==e?($("#instruction-left-div").hide(),$("#infoIconText").hide()):4==e&&($("#instruction-right-div").hide(),$("#cloudImgDiv").hide())}function checkScreenAndDoubleClick(e){if(isMobile())if(isPlanetClicked)if(isPlanetClicked=!1,e===urlStory+"?cNo=1"){let e=$("#storyChapter").val();$.ajax({type:"get",url:urlStory,data:{chapter_no:e,_token:token},success:function(e){window.location.href=urlStory+"?cNo=1"}})}else window.location.href=e;else isPlanetClicked=!0,"somethingSpecial"===e&&(venusInfoTxt.isVisible=!0,setTimeout(function(){venusInfoTxt.isVisible=!1},3e3)),setTimeout(function(){isPlanetClicked&&(isPlanetClicked=!1,Swal.fire({width:"10vw",padding:"3em",title:"Double Tap to enter the planet.",showConfirmButton:!1,position:"top-end",showClass:{backdrop:"swal2-backdrop-hide"},timer:2e3,width:100,customClass:{popup:"trevor-popup-class"}}))},500);else window.location.href=e}$("#infoIcon").on("click",function(){show_overlay_text(isCharViewActive?2:1)});var engine=new BABYLON.Engine(canvas,!0,{preserveDrawingBuffer:!0,stencil:!0},!0),theScene=createScene(),i=0;let isInitCameraMoving=!1,isIntroDone=!1,loadingCount=0;setInterval(function(){loadingCount<100&&!isHomeReady&&(loadingCount+=1,document.getElementById("loadingScreenPercent").innerHTML="Loading: "+loadingCount+"%")},200),theScene.executeWhenReady(function(){document.getElementById("loadingScreenPercent").innerHTML="Loading: 100%",setTimeout(()=>{document.getElementById("loadingScreenPercent").style.visibility="hidden",document.getElementById("loadingScreenDiv").remove(),document.getElementById("loadingScreenOverlay").style.display="block"},200),isHomeReady=!0,"Safari"!=testBrowser()&&discvideoTexture.video.play();var e=new BABYLON.SceneOptimizerOptions;e.addOptimization(new BABYLON.HardwareScalingOptimization(0,1.5));new BABYLON.SceneOptimizer(theScene,e);(isSmallDevice()||isMobile())&&(homeSun&&(homeSun.material.diffuseTexture=initVideo,sunGlowLayer.intensity=0),set_touch_icons()),engine.runRenderLoop(function(){theScene&&(theScene.render(),discvideoTexture&&discvideoTexture.video.currentTime>=250&&!isIntroDone&&(discvideoTexture.video.pause(),discvideoTexture.video.currentTime=0,$("#loadingScreenOverlay").append("<div id='overlayText' style='font-size:4.5vw;'>From here on, we trust in you and your social conscience.<br/>Kindly join us and express it.<br/><img style='padding-top:10%;width:7vw;' src='front/images3D/playMusic.png'></div>"),document.getElementById("loadingScreenOverlay").style.display="block",isIntroDone=!0))})}),window.addEventListener("resize",function(){engine.resize()});let theCanvas=document.getElementById("canvas");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let isFirstClick=!1,isVideoSkipped=!1;$("#loadingScreenOverlay").on("click",function(){discvideoTexture&&isHomeReady&&(isIntroDone||openFullscreen(),$("#fullscreenIcon").hide(),$(this).hide(),discvideoTexture.video.play(),$("#overlayText").remove())});let isVideoPlaying=!0;function toggle_video_icons(e){"play"===e?(discvideoTexture.video.play(),homeScene.getMeshByName("pauseIcon").isVisible=!0,homeScene.getMeshByName("playIcon").isVisible=!1,isVideoPlaying=!0):"pause"===e&&(discvideoTexture.video.pause(),homeScene.getMeshByName("pauseIcon").isVisible=!1,homeScene.getMeshByName("playIcon").isVisible=!0,isVideoPlaying=!1)}function testOrientation(){window.innerHeight<window.innerWidth?document.getElementById("block_land").style.display="none":document.getElementById("block_land").style.display="block"}$(document).on("keydown",function(e){" "===e.key&&discvideoTexture.video&&toggle_video_icons(isVideoPlaying?"pause":"play")}),$(document).ready(function(){testOrientation()}),window.addEventListener("orientationchange",function(e){testOrientation()},!1),window.addEventListener("resize",function(e){testOrientation(),testFullscreen()},!1);var elem=document.documentElement;function openFullscreen(){elem.mozRequestFullScreen?elem.mozRequestFullScreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.msRequestFullscreen?elem.msRequestFullscreen():elem.requestFullscreen&&elem.requestFullscreen()}function testFullscreen(){window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width||$("#fullscreenIcon").show()}function testBrowser(){return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"unknown"}function isMobile(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function isSmallDevice(){return window.innerWidth<=1024}function set_touch_icons(){$(".touch-rotate").attr("src","front/images3D/icons/rotateTouch.png"),$(".touch-zoom").attr("src","front/images3D/icons/zoomTouch.png"),$(".touch-panning").attr("src","front/images3D/icons/panningTouch.png")}$("#fullscreenIcon").on("click",function(){openFullscreen(),$(this).hide()});