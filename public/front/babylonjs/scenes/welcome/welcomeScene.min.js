var initScene,initCamera,initLight,initSkybox,mbayeTask,mbayeObject;const LOWER_RADIUS_VAL=1,UPPER_RADIUS_VAL=3e3;function createScene(){engine.enableOfflineSupport=!0,BABYLON.Database.IDBStorageEnabled=!0,initScene=new BABYLON.Scene(engine),initCamera=create_init_camera(),initLight=create_init_light(),initSkybox=create_init_skybox(),load_init_meshes(),create_init_planets(),create_init_orbit(),create_init_planet_orbit(),enable_init_webcamera(),add_init_mouse_listener(),create_constellation_planes();var e=new BABYLON.CubeTexture.CreateFromPrefilteredData("front/textures/environment.dds",initScene);return e.gammaSpace=!1,e.level=.5,initScene.environmentTexture=e,initScene}function create_init_camera(){var e=new BABYLON.ArcRotateCamera("Initial Camera",BABYLON.Tools.ToRadians(0),BABYLON.Tools.ToRadians(0),30,new BABYLON.Vector3(-1135,486,1e3),initScene);return e.allowUpsideDown=!1,e.fovMode=BABYLON.Camera.FOVMODE_HORIZONTAL_FIXED,e.fov=1.4,e.lowerRadiusLimit=200,e.upperRadiusLimit=UPPER_RADIUS_VAL,e.wheelPrecision=1,e.angularSensibilityX=4e3,e.angularSensibilityY=4e3,e.panningSensibility=10,e.upperBetaLimit=10,e.panningDistanceLimit=1500,e.pinchPrecision=1,e.attachControl(canvas,!0),e.maxZ=28e3,initScene.activeCamera=e,e}var light2,mbayeInit_object,mbayeInitTask,initEarth_object;function create_init_light(){var e=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(1,3,100),initScene);return e.radius=500,e.specular=new BABYLON.Color3(0,0,0),e.diffuse=new BABYLON.Color3(1,1,1),e.groundColor=new BABYLON.Color3(.5,.5,.5),e.intensity=1,(light2=new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(1,3,100),initScene)).radius=500,light2.specular=new BABYLON.Color3(0,0,0),light2.diffuse=new BABYLON.Color3(1,1,1),light2.intensity=4,e}function create_init_skybox(){var e=BABYLON.MeshBuilder.CreateBox("initSkybox",{size:25e3},initScene);e.position=new BABYLON.Vector3(942,-500,-1500),e.rotation.y=BABYLON.Tools.ToRadians(-60),e.isPickable=!1,e.infiniteDistance=!0,e.checkCollisions=!0;var t=new BABYLON.StandardMaterial("captSkyboxMaterial",initScene);t.backFaceCulling=!1;return t.reflectionTexture=new BABYLON.CubeTexture.CreateFromImages(["front/finalSkybox/px.png","front/finalSkybox/py.png","front/finalSkybox/pz.png","front/finalSkybox/nx.png","front/finalSkybox/ny.png","front/finalSkybox/nz.png"],initScene),t.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,t.disableLighting=!0,t.specular=new BABYLON.Vector3(0,0,0),e.material=t,t.freeze(),e.freezeWorldMatrix(),e}let nuvolaSpeechCloud,nuvolaSpeech,designUtilLayer,homeGizmo,homeGizmo2;function load_init_meshes(){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/mbaye/","MbayePipes.glb",initScene).then(function(e){mbayeInitTask=e.meshes,e.meshes[0].position=new BABYLON.Vector3(-467.95,285.39,642.78),e.meshes[0].rotationQuaternion=new BABYLON.Quaternion(.1173,.9809,-.0854,-.1289),e.meshes[0].scaling=new BABYLON.Vector3(20,20,-20),(mbayeInit_object=e.meshes[0]).isPickable=!1,e.meshes.forEach(function(e){if(e.isPickable=!0,"MbayeBody"===e.name){let t=new BABYLON.PBRMaterial("pbr",initScene);e.material=t,e.material.backFaceCulling=!1,t.albedoColor=new BABYLON.Color3(.5,.5,.5),t.emissiveColor=new BABYLON.Color3(0,0,0),t.metallic=1,t.metallicF0Factor=.5,t.roughness=.08,t.microSurface=1}else"R_EYEAventurine_primitive1"!==e.name&&"L_EYEAventurine_primitive1"!==e.name||(e.material.albedoColor=new BABYLON.Color3(.01,.2,.07))})}),BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/nuvola/","mermaidTail.babylon",initScene).then(function(e){mermaidTail_object=e.meshes[0]}),BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/nuvola/","mermaidBody.babylon",initScene).then(function(e){mermaidHead=e.meshes[0],mermaidHair=e.meshes[1]})]).then(()=>{mermaidHead.setParent(mermaidTail_object),mermaidHair.setParent(mermaidTail_object),mermaidTail_object.position=new BABYLON.Vector3(-551.84,219.14,709.45),mermaidTail_object.rotationQuaternion=new BABYLON.Quaternion(-.0946,-.8844,.1707,-.4235),mermaidTail_object.scaling=new BABYLON.Vector3(.15,.15,.15),mermaidTail_object.isPickable=!0,initCamera.target=new BABYLON.Vector3(0,0,0),initCamera.radius=1360,mbayeInit_object.isPickable=!0,nuvolaSpeech=create_mesh("nuvolaSpeech","front/images3D/participateScene/nuvolaNonmember.png",78,110,1,-566,278,684,{x:.0249,y:.8594,z:-.1207,w:.4959});init_scrollable_viewer("speech1Nonmember","speech1Nonmember.png",2e3,1e3,{x:-5300,y:413,z:2148},{x:.1143,y:-.5471,z:.0752,w:.8256});let e=create_mesh("Solar","front/images3D/homeScene/solarSitting2.png",800,650,1,-6040,297,1069,{x:.0899,y:-.6906,z:.0035,w:.7171});e.actionManager=new BABYLON.ActionManager(initScene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverSun)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutSun))})}function create_lowres_earth(){initEarth_object=init_planet("earth","earthMatl","front/textures/home/planets/earth.jpg","front/textures/home/planets/earthnormal.png",0,0,0,400),animateObjectRotationNoEase(initEarth_object,10,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0))}function load_highres_earth(){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,"front/objects/participateScene/earth/","earth122319.babylon",initScene).then(function(e){e.meshes[9].scaling=new BABYLON.Vector3(.6,.6,.6),water=new BABYLON.WaterMaterial("water",initScene,new BABYLON.Vector2(2048,2048)),water.backFaceCulling=!0,water.bumpTexture=new BABYLON.Texture("front/textures/participate/waterbump.png",initScene),water.windForce=10,water.windDirection=new BABYLON.Vector2(-1,0),water.waveHeight=.2,water.bumpHeight=.3,water.waveLength=.1,water.colorBlendFactor=.25714,water.waterColor=new BABYLON.Color3(.31428,.2,.80357),water.addToRenderList(initSkybox),e.meshes[7].material=water,e.meshes.forEach(function(e){e.actionManager=new BABYLON.ActionManager(initScene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetInit)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetInit))}),initEarth_object=e.meshes[9]})]).then(()=>{animateObjectRotationNoEase(initEarth_object,10,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0))})}function init_scrollable_viewer(e,t,n,i,r,a){let o=BABYLON.MeshBuilder.CreatePlane(e,{width:n,height:i},initScene);o.position=new BABYLON.Vector3(r.x,r.y,r.z),o.rotationQuaternion=new BABYLON.Quaternion(a.x,a.y,a.z,a.w);let s=new BABYLON.StandardMaterial(e+"Matl",initScene);s.diffuseColor=new BABYLON.Color3(1,0,0),s.backFaceCulling=!1,o.material=s;var l=BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(o),c=new BABYLON.GUI.ScrollViewer;c.thickness=0,c.width=1,c.height=1,c.barColor="green",c.thumbLength=.3,c.thumbHeight=.1,c.verticalBar.border=0,c.barSize=40,(isSmallDevice()||isMobile())&&(c.barSize=60),c.onPointerDownObservable.add(function(){isSpeechViewActive&&initCamera.detachControl(canvas)}),c.onPointerUpObservable.add(function(){isSpeechViewActive&&initCamera.attachControl(canvas,!0)}),l.addControl(c);var u=new BABYLON.GUI.Rectangle;u.thickness=0,u.width=1,u.height=4,u.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,u.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,u.isPickable=!1,c.addControl(u);var B=new BABYLON.GUI.Image(e+"Img","front/images3D/participateScene/"+t);return B.width=1,B.height=1,u.addControl(B),o}function enable_home_gizmo2(e){(designUtilLayer=new BABYLON.UtilityLayerRenderer(initScene)).utilityLayerScene.autoClearDepthAndStencil=!1,(homeGizmo=new BABYLON.RotationGizmo(designUtilLayer)).attachedMesh=e,(homeGizmo2=new BABYLON.PositionGizmo(designUtilLayer)).attachedMesh=e,homeGizmo2.scaleRatio=1.5}var initOrbit,initSun,initMercury,initVenus,initEarth,initMars,initJupiter,initSaturn,initUranus,initNeptune,initPluto,initMoon;function create_init_orbit(){(initOrbit=BABYLON.Mesh.CreateGround("initOrbit",3e3,2600,1,initScene)).isPickable=!1,initOrbit.scaling=new BABYLON.Vector3(2.5,2.5,2.5),initOrbit.position=new BABYLON.Vector3(200,0,-100),initOrbit.rotation=new BABYLON.Vector3(BABYLON.Tools.ToRadians(-10),BABYLON.Tools.ToRadians(180),BABYLON.Tools.ToRadians(0));var e=new BABYLON.StandardMaterial("initOrbitMatl",initScene);e.diffuseTexture=new BABYLON.Texture("front/textures/participate/welcomeOrbit.png",initScene),e.diffuseTexture.hasAlpha=!0,e.backFaceCulling=!1,initOrbit.material=e,initOrbit.material.freeze(),initOrbit.freezeWorldMatrix()}var planetAxis=new BABYLON.Vector3(0,4,0),redAngle=.01,yellowAngle=.02,grayAngle=-.01;let sunOrigTexture,sunGlowLayer;function create_init_planets(){initSun=init_planet("sun","sunMatl","front/textures/home/planets/sun.jpg","front/textures/home/planets/sunnormal.jpg",-78,319,-2097,250),(sunGlowLayer=new BABYLON.GlowLayer("glow",initScene)).customEmissiveColorSelector=function(e,t,n,i){"sun"===e.name?i.set(235,192,52,.2):i.set(0,0,0,0)},init_clone_planet(initMercury=initSun.clone("mercury"),"mercuryMatl","front/textures/home/planets/mercury.jpg","front/textures/home/planets/mercurynormal.jpg",-442,226,-1428,.32),init_clone_planet(initVenus=initSun.clone("initVenus"),"venusMatl","front/textures/home/planets/venus.jpg","front/textures/home/planets/venusnormal.jpg",-317,95,-684,.48),init_clone_planet(initMoon=initSun.clone("initMoon"),"moonMatl","front/textures/home/planets/moon.jpg","front/textures/home/planets/moonnormal.jpg",329,163,-263,.2),init_clone_planet(initMars=initSun.clone("initMars"),"marsMatl","front/textures/home/planets/mars.jpg","front/textures/home/planets/marsnormal.jpg",-752,-42,78,.3),init_clone_planet(initJupiter=initSun.clone("earthJupiter"),"jupiterMatl","front/textures/home/planets/jupiter.jpg","front/textures/home/planets/jupiternormal.jpg",210,-144,730,.48),initSaturn=init_planet("initSaturn","saturnMatl","front/textures/home/planets/saturn.jpg","front/textures/home/planets/saturnnormal.jpg",2551,436,-2414,220);var e=BABYLON.Mesh.CreateGround("rings",490,490,1,initScene);e.isPickable=!1,e.parent=initSaturn,initSaturn.rotationQuaternion=new BABYLON.Quaternion(.28,.18,.02,.94);var t=new BABYLON.StandardMaterial("ringsMaterial",initScene);t.diffuseTexture=new BABYLON.Texture("front/textures/home/planets/saturnRing2.png",initScene),t.diffuseTexture.hasAlpha=!0,t.backFaceCulling=!1,e.material=t,init_clone_planet(initUranus=initSun.clone("initUranus"),"uranusMatl","front/textures/home/planets/uranus.jpg","front/textures/home/planets/uranusnormal.jpg",-2097,-91,337,.48),init_clone_planet(initNeptune=initSun.clone("initNeptune"),"neptuneMatl","front/textures/home/planets/neptune.jpg","front/textures/home/planets/neptunenormal.jpg",2835,-5,-76,.92),init_clone_planet(initPluto=initSun.clone("initPluto"),"plutoMatl","front/textures/home/planets/pluto.jpg","front/textures/home/planets/plutonormal.jpg",2300,400,500,.4),initSun.actionManager=new BABYLON.ActionManager(initScene),initSun.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverSun)),initSun.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutSun)),animateObjectRotationNoEase(initVenus,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(360),0)),animateObjectRotationNoEase(initMars,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0)),animateObjectRotationNoEase(initJupiter,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0)),animateObjectRotationNoEase(initUranus,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0)),animateObjectRotationNoEase(initNeptune,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0)),animateObjectRotationNoEase(initPluto,15,200,new BABYLON.Vector3(0,BABYLON.Tools.ToRadians(-360),0))}var animateObjectRotationNoEase=function(e,t,n,i){BABYLON.Animation.CreateAndStartAnimation("objRot"+e.name,e,"rotation",t,n,e.rotation,i,1,null)};function init_planet(e,t,n,i,r,a,o,s){var l=BABYLON.Mesh.CreateSphere(e,0,s,initScene);l.position=new BABYLON.Vector3(r,a,o);var c=new BABYLON.StandardMaterial(t,initScene);return c.diffuseTexture=new BABYLON.Texture(n,initScene),c.bumpTexture=new BABYLON.Texture(i,initScene),c.specularColor=new BABYLON.Color3(0,0,0),c.freeze(),l.freezeWorldMatrix(),l.material=c,l.material.freeze(),l.convertToUnIndexedMesh(),"sun"===e&&(sunOrigTexture=l.material.diffuseTexture),l}function init_clone_planet(e,t,n,i,r,a,o,s){e.position=new BABYLON.Vector3(r,a,o),e.scaling=new BABYLON.Vector3(s,s,s);var l=new BABYLON.StandardMaterial(t,initScene);l.diffuseTexture=new BABYLON.Texture(n,initScene),l.bumpTexture=new BABYLON.Texture(i,initScene),l.specularColor=new BABYLON.Color3(0,0,0),e.material=l,e.material.freeze(),e.convertToUnIndexedMesh(),e.actionManager=new BABYLON.ActionManager(initScene),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetInit)),e.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetInit))}let origScaling;var onOverSun=e=>{var t=e.source.id;let n=document.createElement("span");n.setAttribute("id","sunLbl");var i=n.style;i.position="absolute",i.padding="0.2%",i.color="#efad0c",i.fontFamily="Courgette-Regular",i.fontSize="2em",i.top=e.pointerY+"px",i.left=e.pointerX+"px",i.cursor="pointer",initWebCamScreen&&"sun"==t&&(initSun.material.diffuseTexture=initVideo,sunGlowLayer.intensity=0),"Solar"===t&&(e.source.material.emissiveColor=BABYLON.Color3.White(),origScaling=e.source.scaling,e.source.scaling=new BABYLON.Vector3(1.1*origScaling.x,1.1*origScaling.y,1.1*origScaling.z),document.body.appendChild(n),n.textContent=isSpeechViewActive?"Return":"View")},onOutSun=e=>{for(isMobile()||(initSun.material.diffuseTexture=sunOrigTexture),"Solar"===e.source.id&&(e.source.material.emissiveColor=new BABYLON.Color3(.4,.4,.4),e.source.scaling=origScaling);document.getElementById("sunLbl");)document.getElementById("sunLbl").parentNode.removeChild(document.getElementById("sunLbl"));sunGlowLayer.intensity=1};let initVideo,initWebCamScreen,initWebCamScreen22;function enable_init_webcamera(){var e=!1;(initWebCamScreen=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen",{radius:110,tessellation:0},initScene)).position=new BABYLON.Vector3(3536,461,-648),initWebCamScreen.isPickable=!1,(initWebCamScreen22=BABYLON.MeshBuilder.CreateDisc("initWebCamScreen22",{radius:110,tessellation:0},initScene)).position=new BABYLON.Vector3(3536,461,-648),initSun&&initWebCamScreen.setParent(initSun),initWebCamScreen.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen22.rotationQuaternion=new BABYLON.Quaternion(0,-.6424,0,.7663),initWebCamScreen.setEnabled(!1),initWebCamScreen.isVisible=!1,initWebCamScreen22.setEnabled(!1),initWebCamScreen22.isVisible=!1;var t=new BABYLON.StandardMaterial("initWebCamScreenTexture",initScene);t.specularColor=new BABYLON.Color3(0,0,0),t.backFaceCulling=!1;var n=new BABYLON.StandardMaterial("initWebCamScreenTexture",initScene);n.specularColor=new BABYLON.Color3(0,0,0),n.backFaceCulling=!1,initWebCamScreen22.material=n,BABYLON.VideoTexture.CreateFromWebCam(initScene,function(e){initVideo=e,t.diffuseTexture=initVideo},{maxWidth:256,maxHeight:256}),initScene.onBeforeRenderObservable.add(function(){void 0!==initVideo&&0==e&&4==initVideo.video.readyState&&(initWebCamScreen.material=t,e=!0)})}$("#infoIcon").on("click",function(){$("#instruction-left-div").toggle(),$("#infoIconTextup").toggle(),$("#arrowGIFPlanet").toggle(),isIns2Active=!isIns2Active,$("#StarTextCurve").toggle(),$("#PlanetTextCurve").toggle(),$("#SunTextCurve").toggle(),set_circle_type()});let isIns2Active=!1;function set_circle_type(){isIns2Active?(circleType=new CircleType(document.getElementById("StarTextCurve")),circleType1=new CircleType(document.getElementById("PlanetTextCurve")),circleType2=new CircleType(document.getElementById("SunTextCurve")),circleType.radius(120),circleType1.radius(120).dir(-1),circleType2.radius(120)):(circleType.destroy(),circleType1.destroy(),circleType2.destroy())}let initPointer={x:null,y:null,z:null},deltaPointer={x:0,y:0,z:0};var timestamp=null;let lastMouseX,lastMouseY,startTime,isSpeechViewActive=!1,focusSpeechSpecs=[{x:-4169,y:761,z:1350},5.8836,1.2971,100],initCameraSpecs=[{x:-1134,y:516,z:1e3},2.4193,1.242,1350];function add_init_mouse_listener(){var e=function(e){if(initScene){var t=initScene.pick(initScene.pointerX,initScene.pointerY);if(t.hit){var n=t.pickedMesh.name;"sun"===n&&checkScreenAndDoubleClick("register","register")}if(0===e.button&&(deltaPointer.x=0,deltaPointer.y=0,deltaPointer.z=0,initPointer.x=e.clientX,initPointer.y=e.clientY,isFast=!1,startTime=new Date),orbitsMap.has(n)&&checkScreenAndDoubleClick(n,"orbit"),starsMap.has(n)&&checkScreenAndDoubleClick(n,"star"),"Solar"===n){let e=focusSpeechSpecs[0];isSpeechViewActive?(initCamera.setTarget(new BABYLON.Vector3(0,0,0)),initCamera.alpha=initCameraSpecs[1],initCamera.beta=initCameraSpecs[2],initCamera.radius=initCameraSpecs[3],isSpeechViewActive=!1):(initCamera.setTarget(new BABYLON.Vector3(e.x,e.y,e.z)),initCamera.alpha=focusSpeechSpecs[1],initCamera.beta=focusSpeechSpecs[2],initCamera.radius=focusSpeechSpecs[3],isSpeechViewActive=!0)}}},t=function(){deltaPointer.x,initPointer.x=null,initPointer.y=null,initPointer.z=null,startTime=0,timestamp=0,whoaAudio.pause(),whoaAudio.currentTime=0},n=function(e){if(null===timestamp&&(timestamp=new Date),initPointer.x){var t=timestamp-startTime,n=Math.abs(e.clientX-initPointer.x)/t*100;Math.abs(e.clientY-initPointer.y);timestamp=new Date,n>=800&&whoaAudio.play()}};canvas.addEventListener("pointerdown",e,!1),canvas.addEventListener("pointerup",t,!1),canvas.addEventListener("pointermove",n,!1),initScene.onDispose=function(){canvas.removeEventListener("pointerdown",e),canvas.removeEventListener("pointerup",t),canvas.removeEventListener("pointermove",n)}}var earthOrbit,mercuryOrbit,venusOrbit,jupiterOrbit,saturnOrbit,uranusOrbit,neptuneOrbit,plutoOrbit,sunOrbit,moonOrbit;function create_init_planet_orbit(){earthOrbit=init_orbit("Earth","orbitMatl","front/textures/participate/planetorbit2.png",0,0,0,1.1,200,90),mercuryOrbit=init_orbit("Mercury","orbitMatl","front/textures/participate/planetorbit5.png",-444.158,226.007,-1427.216,.3,200,110),venusOrbit=init_orbit("Venus","orbitMatl","front/textures/participate/planetorbit.png",-317.946,90.369,-681.065,.4,200,100),marsOrbit=init_orbit("Mars","orbitMatl","front/textures/participate/planetorbit3.png",-754.426,-45.511,78.592,.25,200,90),jupiterOrbit=init_orbit("Jupiter","orbitMatl","front/textures/participate/planetorbit3.png",210.424,-145.791,729.638,.4,200,90),saturnOrbit=init_orbit("Saturn","orbitMatl","front/textures/participate/planetorbit.png",2568.391,456.358,-2411.465,1.1,200,100),uranusOrbit=init_orbit("Uranus","orbitMatl","front/textures/participate/planetorbit.png",-2100.472,-98.486,339.091,.5,200,110),neptuneOrbit=init_orbit("Neptune","orbitMatl","front/textures/participate/planetorbit6.png",2833.94,-1.771,-79.771,.9,200,110),plutoOrbit=init_orbit("Pluto","orbitMatl","front/textures/participate/planetorbit.png",2299.891,400.604,500.918,.4,200,100),sunOrbit=init_orbit("Sun","orbitMatl","front/textures/participate/planetorbit6.png",-80.91,308.13,-2082.51,.8,200,110),moonOrbit=init_orbit("Moon","orbitMatl","front/textures/participate/planetorbit6.png",329.613,157.802,-263.126,.25,200,110)}let orbitsMap=new Map;function init_orbit(e,t,n,i,r,a,o,s,l){var c=BABYLON.MeshBuilder.CreateDisc(e,{radius:s,tessellation:0},initScene);c.scaling=new BABYLON.Vector3(o,o,o),c.position=new BABYLON.Vector3(i,r,a),c.rotation.x=BABYLON.Tools.ToRadians(l);var u=new BABYLON.StandardMaterial(t,initScene);u.diffuseTexture=new BABYLON.Texture(n,initScene),u.diffuseTexture.hasAlpha=!0,c.material=u,c.material.backFaceCulling=!1,c.freezeWorldMatrix(),c.convertToUnIndexedMesh(),c.actionManager=new BABYLON.ActionManager(initScene),c.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbitInit)),c.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbitInit)),"Saturn"==e?c.rotationQuaternion=new BABYLON.Quaternion(-.471,.112,.142,.859):"Pluto"==e&&(c.rotationQuaternion=new BABYLON.Quaternion(.692,.143,.143,.692)),orbitsMap.set(e,null)}function openWikipediaPage(e,t){showPage("Mercury"==e?"Mercury_(planet)":e),"star"==t&&("Leo"==e?showPage("Leo_(constellation)"):"Aquarius"==e?showPage("Aquarius_(constellation)"):"Aries"==e?showPage("Aries_(constellation)"):"Cancer"==e?showPage("Cancer_(constellation)"):"Capricorn"==e?showPage("Capricorn_(constellation)"):"Gemini"==e?showPage("Gemini_(constellation)"):"Libra"==e?showPage("Libra_(constellation)"):"Pisces"==e?showPage("Pisces_(constellation)"):"Sagittarius"==e?showPage("Sagittarius_(constellation)"):"Scorpio"==e?showPage("Scorpio_(constellation)"):"Taurus"==e?showPage("Taurus_(constellation)"):"Virgo"==e&&showPage("Virgo_(constellation)"))}var wikiBtn,onOverPlanetOrbitInit=e=>{(wikiBtn=document.createElement("span")).setAttribute("id","planetOrbitLbl");var t=wikiBtn.style;t.position="absolute",t.color="#00BFFF  ",t.fontFamily="Courgette-Regular",t.fontSize="3rem",t.top=initScene.pointerY-50+"px",t.left=initScene.pointerX-50+"px",t.cursor="pointer",orbitsMap.has(e.meshUnderPointer.name)&&wikiBtn.setAttribute("onclick","openWikipediaPage('"+e.meshUnderPointer.name+"', 'orbit')"),"Leo"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Leo_(constellation)')"):"Aquarius"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Aquarius_(constellation)')"):"Aries"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Aries_(constellation)')"):"Cancer"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Cancer_(constellation)')"):"Capricorn"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Capricorn_(constellation)')"):"Gemini"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Gemini_(constellation)')"):"Libra"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Libra_(constellation)')"):"Pisces"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Pisces_(constellation)')"):"Sagittarius"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Sagittarius_(constellation)')"):"Scorpio"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Scorpio_(constellation)')"):"Taurus"==e.meshUnderPointer.name?wikiBtn.setAttribute("onclick","showPage('Taurus_(constellation)')"):"Virgo"==e.meshUnderPointer.name&&wikiBtn.setAttribute("onclick","showPage('Virgo_(constellation)')"),document.body.appendChild(wikiBtn),wikiBtn.textContent=e.meshUnderPointer.name},onOutPlanetOrbitInit=e=>{for(;document.getElementById("planetOrbitLbl");)document.getElementById("planetOrbitLbl").parentNode.removeChild(document.getElementById("planetOrbitLbl"))},onOverPlanetInit=e=>{},onOutPlanetInit=e=>{};function create_mesh(e,t,n,i,r,a,o,s,l){var c=BABYLON.MeshBuilder.CreatePlane(e,{height:n,width:i},initScene);c.scaling=new BABYLON.Vector3(r,r,r),c.position=new BABYLON.Vector3(a,o,s),c.rotationQuaternion=new BABYLON.Quaternion(l.x,l.y,l.z,l.w);var u=new BABYLON.StandardMaterial(e+"matl",initScene);return u.diffuseTexture=new BABYLON.Texture(t,initScene),u.opacityTexture=new BABYLON.Texture(t,initScene),"Solar"==e&&(u.emissiveColor=new BABYLON.Color3(.4,.4,.4)),u.ambientColor=new BABYLON.Color3(1,1,1),u.diffuseTexture.hasAlpha=!0,c.material=u,c}let starsMap=new Map;function init_constellation(e,t,n,i,r,a,o,s){var l=BABYLON.MeshBuilder.CreatePlane(e,{height:n,width:i},initScene);l.scaling=new BABYLON.Vector3(r,r,r),l.position=new BABYLON.Vector3(a,o,s);var c=new BABYLON.StandardMaterial("starMatl",initScene);c.diffuseTexture=new BABYLON.Texture(t,initScene),c.diffuseTexture.hasAlpha=!0,l.material=c,l.material.backFaceCulling=!1,l.freezeWorldMatrix(),l.actionManager=new BABYLON.ActionManager(initScene),l.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbitInit)),l.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbitInit)),"Leo"===e&&(l.rotationQuaternion=new BABYLON.Quaternion(-.553,.438,.438,.553)),starsMap.set(e,null)}function init_clone_constellation(e,t,n,i,r,a,o){t.position=new BABYLON.Vector3(r,a,o),t.name=e,t.scaling=new BABYLON.Vector3(i,i,i);var s=new BABYLON.StandardMaterial("starsMatl",initScene);s.diffuseTexture=new BABYLON.Texture(n,initScene),s.diffuseTexture.hasAlpha=!0,t.material=s,t.actionManager=new BABYLON.ActionManager(initScene),t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbitInit)),t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbitInit)),"Gemini"===e?t.rotationQuaternion=new BABYLON.Quaternion(.149,.729,.179,.632):"Virgo"===e?t.rotationQuaternion=new BABYLON.Quaternion(.0105,.707,-.014,-.702):"Pisces"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.005,-.698,-.709,.0155):"Sagittarius"===e?t.rotationQuaternion=new BABYLON.Quaternion(.411,-.562,.589,.389):"Capricorn"===e?t.rotationQuaternion=new BABYLON.Quaternion(.694,.0323,-.106,.702):"Libra"===e?t.rotationQuaternion=new BABYLON.Quaternion(.152,-.945,.043,.256):"Aries"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0299,.158,.07,.976):"Cancer"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0469,-.889,.427,.055):"Scorpio"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.0297,.132,.213,.954):"Taurus"===e?t.rotationQuaternion=new BABYLON.Quaternion(-.703,.01,.0256,.695):"Aquarius"===e&&(t.rotationQuaternion=new BABYLON.Quaternion(-.032,-.71,.027,.687)),starsMap.set(e,null)}var leoStars,geminiStars;function create_constellation_planes(){(leoStars=BABYLON.MeshBuilder.CreatePlane("Leo",{height:150,width:300},initScene)).scaling=new BABYLON.Vector3(14,14,14),leoStars.position=new BABYLON.Vector3(-2877,4345,1908),leoStars.rotationQuaternion=new BABYLON.Quaternion(-.553,.438,.438,.553);var e=new BABYLON.StandardMaterial("leoMatl",initScene);e.diffuseTexture=new BABYLON.Texture("front/textures/participate/constellations/leo.png",initScene),e.diffuseTexture.hasAlpha=!0,leoStars.material=e,leoStars.material.backFaceCulling=!1,leoStars.freezeWorldMatrix(),leoStars.actionManager=new BABYLON.ActionManager(initScene),leoStars.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,onOverPlanetOrbitInit)),leoStars.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,onOutPlanetOrbitInit)),init_clone_constellation("Gemini",geminiStars=leoStars.clone(),"front/textures/participate/constellations/gemini.png",14,4227,2823,806),virgoStars=leoStars.clone(),init_clone_constellation("Virgo",virgoStars,"front/textures/participate/constellations/virgo.png",14,-4242,2864,-9),piscesStars=leoStars.clone(),init_clone_constellation("Pisces",piscesStars,"front/textures/participate/constellations/pisces.png",14,942,4350,1731),sagittariusStars=leoStars.clone(),init_clone_constellation("Sagittarius",sagittariusStars,"front/textures/participate/constellations/sagittarius.png",14,2917,-4081,614),capricornStars=leoStars.clone(),init_clone_constellation("Capricorn",capricornStars,"front/textures/participate/constellations/capricorn.png",14,-1996,-3873,2e3),libraStars=leoStars.clone(),init_clone_constellation("Libra",libraStars,"front/textures/participate/constellations/libra.png",14,-766,1584,-3235),ariesStars=leoStars.clone(),init_clone_constellation("Aries",ariesStars,"front/textures/participate/constellations/aries2.png",14,664,3268,5197),cancerStars=leoStars.clone(),init_clone_constellation("Cancer",cancerStars,"front/textures/participate/constellations/cancer.png",14,-417,-3774,-2125),scorpioStars=leoStars.clone(),init_clone_constellation("Scorpio",scorpioStars,"front/textures/participate/constellations/scorpio.png",14,1e3,-2362,5218),taurusStars=leoStars.clone(),init_clone_constellation("Taurus",taurusStars,"front/textures/participate/constellations/taurus.png",14,-121,4275,-982),aquariusStars=leoStars.clone(),init_clone_constellation("Aquarius",aquariusStars,"front/textures/participate/constellations/aquarius.png",14,-4223,-2058,773),light2.includedOnlyMeshes.push(leoStars),light2.includedOnlyMeshes.push(geminiStars),light2.includedOnlyMeshes.push(virgoStars),light2.includedOnlyMeshes.push(sagittariusStars),light2.includedOnlyMeshes.push(capricornStars),light2.includedOnlyMeshes.push(ariesStars),light2.includedOnlyMeshes.push(cancerStars),light2.includedOnlyMeshes.push(scorpioStars),light2.includedOnlyMeshes.push(taurusStars),light2.includedOnlyMeshes.push(aquariusStars),starsLight=new BABYLON.HighlightLayer("starsLight",initScene),starsLight.addMesh(leoStars,BABYLON.Color3.Yellow()),starsLight.addMesh(ariesStars,BABYLON.Color3.Red()),starsLight.addMesh(taurusStars,BABYLON.Color3.Teal()),starsLight.addMesh(geminiStars,BABYLON.Color3.Yellow()),starsLight.addMesh(cancerStars,BABYLON.Color3.Teal()),starsLight.addMesh(virgoStars,BABYLON.Color3.Green()),starsLight.addMesh(libraStars,new BABYLON.Color3(1,.1,.7)),starsLight.addMesh(scorpioStars,BABYLON.Color3.Red()),starsLight.addMesh(sagittariusStars,BABYLON.Color3.Purple()),starsLight.addMesh(capricornStars,new BABYLON.Color3(0,.5,0)),starsLight.addMesh(piscesStars,BABYLON.Color3.Green()),starsLight.innerGlow=!1,starsLight.intensity=1;var t=0;initScene.registerBeforeRender(()=>{t+=.1,starsLight.blurHorizontalSize=.5+.4*Math.cos(t)+.4,starsLight.blurVerticalSize=.5+.4*Math.sin(t/3)+.4})}let loadCounter=0;setInterval(function(){loadCounter<100&&$("#loadingScreenPercent").html("Loading: "+loadCounter+" %"),loadCounter++},700);let isFast=!1,whoaAudio=new Audio("front/audio/participateScene/whoaAudio.mp3");var engine=new BABYLON.Engine(canvas,!0,{preserveDrawingBuffer:!0,stencil:!0},!0),theScene=createScene();theScene.executeWhenReady(function(){document.getElementById("loadingScreenPercent").style.visibility="hidden",document.getElementById("loadingScreenPercent").innerHTML="Loading: 0 %",document.getElementById("loadingScreenDiv").remove();var e=new BABYLON.SceneOptimizerOptions;e.addOptimization(new BABYLON.HardwareScalingOptimization(0,1.5));new BABYLON.SceneOptimizer(theScene,e);(isSmallDevice()||isMobile())&&initSun&&(initSun.material.diffuseTexture=initVideo,sunGlowLayer.intensity=0),engine.runRenderLoop(function(){theScene&&theScene.render()})}),window.addEventListener("resize",function(){engine.resize(),testOrientation(),testFullscreen()}),$(document).ready(function(){testOrientation(),isSmallDevice()||isMobile()?create_lowres_earth():load_highres_earth()}),$("#wikiPage").on("load",function(){$(".iframe-loading").hide()});let isScreenVisible=!1,isCharDivFullscreen=!1;function showPage(e){$(".iframe-loading").show();let t=document.getElementById("iframe-loading"),n=document.getElementById("wikipediaDiv"),i=document.getElementById("wikiPage");"visible"!=t.style.visibility&&(t.style.visibility="visible"),$("#fullscreenIcon").hide(),document.getElementById("page-url").textContent="https://en.wikipedia.org/wiki/"+e,i.src="https://en.wikipedia.org/wiki/"+e,"visible"!=n.style.visibility&&(n.style.visibility="visible",isScreenVisible=!0)}function hidePage(){let e=document.getElementById("iframe-loading");var t=document.getElementById("wikipediaDiv");document.getElementById("wikiPage").src="",t.style.visibility="hidden",e.style.visibility="hidden",isScreenVisible=!1,$("#fullscreenIcon").show()}function fullscreenDescDiv(){isCharDivFullscreen?(document.getElementById("fullscreen-btn").title="Fullscreen",document.getElementById("fullscreen-btn").src="front/images3D/fullscreen-btn.png",isSmallDevice()||isMobile()?document.getElementById("wikipediaDiv").style.width="50%":document.getElementById("wikipediaDiv").style.width="30%",isCharDivFullscreen=!1):(document.getElementById("fullscreen-btn").src="front/images3D/minimize-btn.png",document.getElementById("fullscreen-btn").title="Windowed",document.getElementById("wikipediaDiv").style.width="100%",isCharDivFullscreen=!0)}var isMeshClicked=!1;function checkScreenAndDoubleClick(e,t){isMobile()?isMeshClicked?(isMeshClicked=!1,"register"==t?window.location.href=e:openWikipediaPage(e,t)):isMeshClicked=!0:"orbit"===t?openWikipediaPage(e,t):"register"==t&&(window.location.href=e)}